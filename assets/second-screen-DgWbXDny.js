import{r as t,M as J,j as r,i as X,u as H,P as Q,a as Z,b as ee,L as te,c as K,d as O,W as ne,B as L,m as se,T as N,e as oe}from"./index-C9GCzI0O.js";import{u as re}from"./use-element-visible-Cm0wIwZ5.js";function P(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function ie(...e){return o=>{let s=!1;const i=e.map(c=>{const n=P(c,o);return!s&&typeof n=="function"&&(s=!0),n});if(s)return()=>{for(let c=0;c<i.length;c++){const n=i[c];typeof n=="function"?n():P(e[c],null)}}}}function ce(...e){return t.useCallback(ie(...e),e)}class le extends t.Component{getSnapshotBeforeUpdate(o){const s=this.props.childRef.current;if(s&&o.isPresent&&!this.props.isPresent){const i=s.offsetParent,c=X(i)&&i.offsetWidth||0,n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft,n.right=c-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ae({children:e,isPresent:o,anchorX:s,root:i}){const c=t.useId(),n=t.useRef(null),a=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=t.useContext(J),u=ce(n,e?.ref);return t.useInsertionEffect(()=>{const{width:l,height:f,top:d,left:v,right:g}=a.current;if(o||!n.current||!l||!f)return;const h=s==="left"?`left: ${v}`:`right: ${g}`;n.current.dataset.motionPopId=c;const x=document.createElement("style");p&&(x.nonce=p);const E=i??document.head;return E.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${f}px !important;
            ${h}px !important;
            top: ${d}px !important;
          }
        `),()=>{E.contains(x)&&E.removeChild(x)}},[o]),r.jsx(le,{isPresent:o,childRef:n,sizeRef:a,children:t.cloneElement(e,{ref:u})})}const ue=({children:e,initial:o,isPresent:s,onExitComplete:i,custom:c,presenceAffectsLayout:n,mode:a,anchorX:p,root:u})=>{const l=H(de),f=t.useId();let d=!0,v=t.useMemo(()=>(d=!1,{id:f,initial:o,isPresent:s,custom:c,onExitComplete:g=>{l.set(g,!0);for(const h of l.values())if(!h)return;i&&i()},register:g=>(l.set(g,!1),()=>l.delete(g))}),[s,l,i]);return n&&d&&(v={...v}),t.useMemo(()=>{l.forEach((g,h)=>l.set(h,!1))},[s]),t.useEffect(()=>{!s&&!l.size&&i&&i()},[s]),a==="popLayout"&&(e=r.jsx(ae,{isPresent:s,anchorX:p,root:u,children:e})),r.jsx(Q.Provider,{value:v,children:e})};function de(){return new Map}const T=e=>e.key||"";function q(e){const o=[];return t.Children.forEach(e,s=>{t.isValidElement(s)&&o.push(s)}),o}const fe=({children:e,custom:o,initial:s=!0,onExitComplete:i,presenceAffectsLayout:c=!0,mode:n="sync",propagate:a=!1,anchorX:p="left",root:u})=>{const[l,f]=Z(a),d=t.useMemo(()=>q(e),[e]),v=a&&!l?[]:d.map(T),g=t.useRef(!0),h=t.useRef(d),x=H(()=>new Map),[E,m]=t.useState(d),[_,R]=t.useState(d);ee(()=>{g.current=!1,h.current=d;for(let j=0;j<_.length;j++){const S=T(_[j]);v.includes(S)?x.delete(S):x.get(S)!==!0&&x.set(S,!1)}},[_,v.length,v.join("-")]);const y=[];if(d!==E){let j=[...d];for(let S=0;S<_.length;S++){const w=_[S],B=T(w);v.includes(B)||(j.splice(S,0,w),y.push(w))}return n==="wait"&&y.length&&(j=y),R(q(j)),m(d),null}const{forceRender:b}=t.useContext(te);return r.jsx(r.Fragment,{children:_.map(j=>{const S=T(j),w=a&&!l?!1:d===_||v.includes(S),B=()=>{if(x.has(S))x.set(S,!0);else return;let $=!0;x.forEach(Y=>{Y||($=!1)}),$&&(b?.(),R(h.current),a&&f?.(),i&&i())};return r.jsx(ue,{isPresent:w,initial:!g.current||s?void 0:!1,custom:o,presenceAffectsLayout:c,mode:n,root:u,onExitComplete:w?void 0:B,anchorX:p,children:j},S)})})},U=e=>{const o=e?.getBoundingClientRect();return{left:o?.left||0,right:o?.right||0,width:o?.width||0}},me=(e,o,s)=>{if(o===0||e.length===0)return e;const i=o+s*2,c=structuredClone(e),n=[...c];for(;n.length*s<i;)n.push(...c);return n},he=e=>Array.from({length:e},()=>0),pe=(e,o,s,i)=>(c,n)=>c.map((a,p)=>{const u=e[p];if(!u)return a;const l=U(u);let f=a+n;return n<0&&l.right<o.left?f+=s*(l.width+i):n>0&&l.left>o.right&&(f-=s*(l.width+i)),f}),A=(e,o)=>{e.forEach((s,i)=>{if(s){const c=o[i];s.style.transform=`translate3d(${c}px, 0, 0)`}})},xe=.95,ge=.5,_e=2,ve=25,Ee=({setCircularAnimationPaused:e,translateX:o,slides:s,containerRef:i,updatePositions:c})=>{const n=t.useRef(0),a=t.useRef(!1),p=t.useRef(performance.now()),u=t.useRef(0),l=t.useRef(null),f=t.useRef(!1),d=t.useCallback(()=>{l.current&&cancelAnimationFrame(l.current),l.current=null,f.current=!1,a.current=!1,u.current=0,n.current=0,e(!1)},[e]);t.useEffect(()=>()=>{d()},[d]);const v=t.useCallback(m=>{const _="touches"in m;if(_&&m.touches.length!==1)return;const R=_?m.touches[0].clientX:m.clientX;d(),e(!0),a.current=!0,p.current=performance.now(),n.current=R,u.current=0},[e,d]),g=t.useCallback(()=>{a.current=!1;let m=u.current;const _=()=>{Math.abs(m)>ge?(m*=xe,o.current=c(o.current,m),A(s,o.current),l.current=requestAnimationFrame(_)):d()};Math.abs(m)>_e?(f.current=!0,_()):d()},[c,d,s,o]),h=t.useCallback(m=>{if(!a.current)return;m.cancelable&&m.preventDefault();const _=m instanceof TouchEvent;if(_&&m.touches.length!==1)return;const R=_?m.touches[0].clientX:m.clientX,y=R-n.current;n.current=R,o.current=c(o.current,y),A(s,o.current);const b=performance.now(),j=b-p.current;u.current=y/j*ve,p.current=b},[o,s,c]);t.useEffect(()=>{const m=i?.current;if(!m)return;m.addEventListener("touchmove",h,{passive:!1}),m.addEventListener("mousemove",h,{passive:!1});const _=()=>{a.current&&g()};return document.addEventListener("touchend",_),document.addEventListener("mouseup",_),()=>{m.removeEventListener("touchmove",h),m.removeEventListener("mousemove",h),document.removeEventListener("touchend",_),document.removeEventListener("mouseup",_)}},[i,h,g]);const x=t.useCallback(()=>{e(!0)},[e]),E=t.useCallback(()=>{e(!1)},[e]);return{domActions:{onTouchStart:v,onMouseDown:v,onTouchEnd:g,onMouseUp:g,onMouseEnter:x,onMouseLeave:E},stopAnimation:d}},Ce=({speed:e,side:o,slides:s,translateX:i,updatePositions:c,containerRef:n})=>{const[a,p]=t.useState(!1),u=re(n);return t.useEffect(()=>{p(!u)},[u]),t.useEffect(()=>{let l=null;const f=()=>{if(a||!e){l&&(cancelAnimationFrame(l),l=null);return}const d=o==="left"?-e:e;i.current=c(i.current,d),A(s,i.current),l=requestAnimationFrame(f)};return!a&&e&&(l=requestAnimationFrame(f)),()=>{l&&cancelAnimationFrame(l)}},[a,o,e,i,s,c]),{setCircularAnimationPaused:p}},V=e=>{const[o,s]=t.useState({left:0,right:0,width:0});return t.useEffect(()=>{const i=e.current;if(!i)return;const c=()=>{s({...U(i)})};c();const n=new ResizeObserver(c);return n.observe(i),()=>{n.disconnect()}},[e]),o},Se="_container_1xiqd_14",ye="_slidesContainer_1xiqd_25",G={container:Se,slidesContainer:ye},je=({speed:e,side:o="left",slides:s,slideWidth:i,renderSlide:c})=>{const n=t.useRef(null),a=t.useRef(null),p=t.useRef([]),u=t.useRef([]),{screenWidth:l}=K(),f=V(n),d=V(a),v=t.useMemo(()=>{const y=f.width||600;return me(s,y,i)},[f.width,s,i]),g=v.length,h=(d.width-g*i)/(g-1),x=t.useMemo(()=>pe(p.current,f,g,h),[f,g,h]),{setCircularAnimationPaused:E}=Ce({speed:e,side:o,slides:p.current,translateX:u,updatePositions:x,containerRef:n}),{domActions:m,stopAnimation:_}=Ee({setCircularAnimationPaused:E,translateX:u,slides:p.current,containerRef:n,updatePositions:x});t.useEffect(()=>{(()=>{_(),u.current=he(g),A(p.current,u.current)})()},[l,g,_,e,o]);const R=t.useCallback(y=>b=>{p.current[y]=b},[]);return r.jsx("div",{ref:n,className:G.container,...m,children:r.jsx("div",{ref:a,className:G.slidesContainer,children:v.map((y,b)=>c(y,b,R(b)))})})},Re=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .react-stroke { stroke: currentColor; stroke-width: 16; fill: none; }
      .react-fill { fill: currentColor; }
    `)),t.createElement("circle",{cx:128,cy:128,r:20,className:"react-fill"}),t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}),t.createElement("g",{transform:"rotate(60 128 128)"},t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40})),t.createElement("g",{transform:"rotate(-60 128 128)"},t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}))),be=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .ts-fill { fill: currentColor; }
      .ts-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 120px; }
    `)),t.createElement("rect",{className:"ts-fill",x:0,y:0,width:256,height:256,rx:20}),t.createElement("text",{className:"ts-text",x:128,y:180,textAnchor:"middle",dominantBaseline:"central"},"TS")),we=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .node-fill { fill: currentColor; }
      .node-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 80px; }
    `)),t.createElement("circle",{className:"node-fill",cx:128,cy:128,r:100}),t.createElement("text",{className:"node-text",x:128,y:160,textAnchor:"middle",dominantBaseline:"central"},"node")),Ne="_root_zv3ci_14",Ie="_content_zv3ci_23",Le="_icon_zv3ci_71",Te="_text_zv3ci_76",k={root:Ne,content:Ie,icon:Le,text:Te},ke={reactlogo:Re,typescript:be,nodejs:we},W=t.forwardRef(({query:e,image:o,width:s=20,height:i=20,...c},n)=>{const a=ke[o];return a?r.jsx("div",{ref:n,className:k.root,children:r.jsxs("div",{"aria-label":e,className:O(k.content,"surface-transparent"),children:[r.jsx(a,{...c,width:s,height:i,viewBox:"0 0 256 256",className:k.icon}),r.jsx("div",{className:k.text,children:e})]})}):null});W.displayName="SlideContent";const ze=t.memo(W),Fe="_label_2c990_14",Me="_input_2c990_23",Ae="_inputText_2c990_29",Be="_inputRange_2c990_44",z={label:Fe,input:Me,inputText:Ae,inputRange:Be},De=({label:e,id:o,valueDisplay:s,showValue:i=!0,className:c,labelClassName:n,inputClassName:a,type:p="text",...u})=>{const l=o||`input-${e.toLowerCase().replace(/\s+/g,"-")}`,f=s!==void 0?s:u.value?.toString(),d=p==="range"?z.inputRange:z.inputText;return r.jsxs("div",{className:c,children:[r.jsxs("label",{htmlFor:l,className:O(z.label,n),children:[e,i&&f&&`: ${f}`]}),r.jsx("input",{id:l,type:p,...u,className:O(z.input,d,a)})]})},Oe="_root_zlkjm_14",$e="_button_zlkjm_19",Pe="_panel_zlkjm_26",qe="_title_zlkjm_58",Ve="_section_zlkjm_62",Ge="_label_zlkjm_70",He="_directionGroup_zlkjm_80",Ke="_directionButton_zlkjm_87",Ue="_slidesContainer_zlkjm_91",We="_slide_zlkjm_91",Ye="_slideIndex_zlkjm_112",Je="_input_zlkjm_116",Xe="_select_zlkjm_117",Qe="_applyButton_zlkjm_141",C={root:Oe,button:$e,panel:Pe,title:qe,section:Ve,label:Ge,directionGroup:He,directionButton:Ke,slidesContainer:Ue,slide:We,slideIndex:Ye,input:Je,select:Xe,applyButton:Qe},D={MIN:.1,MAX:3,STEP:.1},Ze=({onUpdate:e,initialSlides:o,initialSpeed:s,initialSide:i})=>{const[c,n]=t.useState(!1),[a,p]=t.useState(s),[u,l]=t.useState(i),[f,d]=t.useState(o);t.useEffect(()=>{const h=document.getElementById("js-animations");if(!h)return;const x=new IntersectionObserver(([E])=>{E.isIntersecting||n(!1)},{threshold:.01});return x.observe(h),()=>{x.unobserve(h)}},[]);const v=(h,x,E)=>{const m=[...f];m[h]={...m[h],[x]:E},d(m)},g=()=>{e({slides:f,speed:a,side:u}),n(!1)};return r.jsxs(r.Fragment,{children:[r.jsx(ne,{children:r.jsx("div",{className:C.root,children:r.jsx(L,{variant:"magic",onClick:()=>n(!c),className:C.button,children:c?"✕ Close":"⚙️ Configure Slider"})})}),r.jsx(fe,{children:c&&r.jsxs(se.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:C.panel,children:[r.jsx(N,{variant:"h3",size:"lg",weight:"bold",color:"primary",className:C.title,children:"Slider Configuration"}),r.jsxs("div",{className:C.section,children:[r.jsx(De,{label:"Speed",type:"range",min:D.MIN,max:D.MAX,step:D.STEP,value:a,valueDisplay:a.toFixed(1),onChange:h=>p(Number(h.target.value))}),r.jsxs("div",{children:[r.jsx(N,{variant:"label",className:C.label,color:"muted",children:"Direction"}),r.jsxs("div",{className:C.directionGroup,children:[r.jsx(L,{variant:"toggle",isActive:u==="left",onClick:()=>l("left"),className:C.directionButton,children:"← Left"}),r.jsx(L,{variant:"toggle",isActive:u==="right",onClick:()=>l("right"),className:C.directionButton,children:"Right →"})]})]}),r.jsxs("div",{children:[r.jsx(N,{variant:"label",className:C.label,color:"muted",children:"Slide Content"}),r.jsx("div",{className:C.slidesContainer,children:f.map((h,x)=>r.jsxs("div",{className:C.slide,children:[r.jsxs(N,{variant:"caption",className:C.slideIndex,children:["Slide ",x+1]}),r.jsx("input",{type:"text",value:h.query,onChange:E=>v(x,"query",E.target.value),placeholder:"Slide text",className:C.input}),r.jsxs("select",{value:h.image,onChange:E=>v(x,"image",E.target.value),className:C.select,children:[r.jsx("option",{value:"reactlogo",children:"React Logo"}),r.jsx("option",{value:"typescript",children:"TypeScript Logo"}),r.jsx("option",{value:"nodejs",children:"Node.js Logo"})]})]},x))})]}),r.jsx(L,{onClick:g,variant:"primary",className:C.applyButton,children:"Apply Changes"})]})]})})]})},et=[{query:"Spin it up",image:"reactlogo"},{query:"Type it safe",image:"typescript"},{query:"Run it fast",image:"nodejs"}],F={MOBILE:200,DESKTOP:200},tt="_root_1rdqu_14",nt="_content_1rdqu_24",st="_header_1rdqu_33",ot="_title_1rdqu_39",rt="_subtitle_1rdqu_43",it="_sliderContainer_1rdqu_48",I={root:tt,content:nt,header:st,title:ot,subtitle:rt,sliderContainer:it},ct=6,lt=["#06B6D4","#3B82F6","#A855F7","#6366F1","#7DD3FC","#8B5CF6"],at=Array.from({length:ct},(e,o)=>o),ut=lt.map(e=>({"--slider-color":e})),M={slides:et,speed:.6,side:"left"},dt=()=>r.jsxs("div",{className:I.header,children:[r.jsx(N,{variant:"h2",size:"3xl",weight:"bold",className:I.title,children:"Reusable components with JS animations"}),r.jsx(N,{variant:"body",className:I.subtitle,color:"muted",children:"Configure your own slider"})]}),ht=()=>{const{screenWidth:e}=K(),o=e>oe.MOBILE?F.DESKTOP:F.MOBILE,s=t.useRef(null),[i,c]=t.useState(!1);t.useEffect(()=>{if(!s.current)return;const u=new IntersectionObserver(([l])=>{c(l.isIntersecting&&l.intersectionRatio>.1)},{threshold:[0,.1,.5,1],rootMargin:"0px"});return u.observe(s.current),()=>{u.disconnect()}},[]);const[n,a]=t.useState(M),p=t.useCallback((u,l,f)=>r.jsx(ze,{ref:f,...u},l),[]);return r.jsx("div",{ref:s,className:I.root,children:r.jsxs("div",{className:I.content,children:[r.jsx(dt,{}),r.jsx(Ze,{onUpdate:a,initialSlides:M.slides,initialSpeed:M.speed,initialSide:M.side}),at.map(u=>r.jsx("div",{className:I.sliderContainer,style:{...ut[u],"--slide-width-mobile":`${F.MOBILE}px`,"--slide-width-desktop":`${F.DESKTOP}px`},children:r.jsx(je,{slides:n.slides,speed:i?n.speed:0,side:n.side,slideWidth:o,renderSlide:p})},u))]})})};export{ht as SecondScreen};
