import{r as u,j as h,f as J,h as ue,R as L,c as fe,k as he,T as K}from"./index-DqMlHvTf.js";const D=typeof window<"u"?u.useLayoutEffect:u.useEffect;function Q(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function me({box:e,defaultHeight:t,defaultWidth:i,disabled:n,element:s,mode:r,style:a}){const{styleHeight:l,styleWidth:c}=u.useMemo(()=>({styleHeight:Q(a?.height),styleWidth:Q(a?.width)}),[a?.height,a?.width]),[o,d]=u.useState({height:t,width:i}),f=n||l!==void 0||r==="only-width"||l!==void 0&&c!==void 0;return D(()=>{if(s===null||f)return;const I=new ResizeObserver(g=>{for(const w of g){const{contentRect:v,target:m}=w;s===m&&d(y=>y.height===v.height&&y.width===v.width?y:{height:v.height,width:v.width})}});return I.observe(s,{box:e}),()=>{I?.unobserve(s)}},[e,f,s,l,c]),u.useMemo(()=>({height:l??o.height,width:c??o.width}),[o,l,c])}function ge(e){const t=u.useRef(()=>{throw new Error("Cannot call during render.")});return D(()=>{t.current=e},[e]),u.useCallback(i=>t.current?.(i),[t])}function P({containerElement:e,direction:t,isRtl:i,scrollOffset:n}){return n}function T(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function $(e,t){if(e===t)return!0;if(!!e!=!!t||(T(e!==void 0),T(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const i in e)if(!Object.is(t[i],e[i]))return!1;return!0}function re({cachedBounds:e,itemCount:t,itemSize:i}){if(t===0)return 0;if(typeof i=="number")return t*i;{const n=e.get(e.size===0?0:e.size-1);T(n!==void 0,"Unexpected bounds cache miss");const s=(n.scrollOffset+n.size)/e.size;return t*s}}function be({align:e,cachedBounds:t,index:i,itemCount:n,itemSize:s,containerScrollOffset:r,containerSize:a}){if(i<0||i>=n)throw RangeError(`Invalid index specified: ${i}`,{cause:`Index ${i} is not within the range of 0 - ${n-1}`});const l=re({cachedBounds:t,itemCount:n,itemSize:s}),c=t.get(i),o=Math.max(0,Math.min(l-a,c.scrollOffset)),d=Math.max(0,c.scrollOffset-a+c.size);switch(e==="smart"&&(r>=d&&r<=o?e="auto":e="center"),e){case"start":return o;case"end":return d;case"center":return c.scrollOffset<=a/2?0:c.scrollOffset+c.size/2>=l-a/2?l-a:c.scrollOffset+c.size/2-a/2;case"auto":default:return r>=d&&r<=o?r:r<d?d:o}}function X({cachedBounds:e,containerScrollOffset:t,containerSize:i,itemCount:n,overscanCount:s}){const r=n-1;let a=0,l=-1,c=0,o=-1,d=0;for(;d<r;){const f=e.get(d);if(f.scrollOffset+f.size>t)break;d++}for(a=d,c=Math.max(0,a-s);d<r;){const f=e.get(d);if(f.scrollOffset+f.size>=t+i)break;d++}return l=Math.min(r,d),o=Math.min(n-1,l+s),a<0&&(a=0,l=-1,c=0,o=-1),{startIndexVisible:a,stopIndexVisible:l,startIndexOverscan:c,stopIndexOverscan:o}}function Ie({itemCount:e,itemProps:t,itemSize:i}){const n=new Map;return{get(s){for(T(s<e,`Invalid index ${s}`);n.size-1<s;){const a=n.size;let l;switch(typeof i){case"function":{l=i(a,t);break}case"number":{l=i;break}}if(a===0)n.set(a,{size:l,scrollOffset:0});else{const c=n.get(a-1);T(c!==void 0,`Unexpected bounds cache miss for index ${s}`),n.set(a,{scrollOffset:c.scrollOffset+c.size,size:l})}}const r=n.get(s);return T(r!==void 0,`Unexpected bounds cache miss for index ${s}`),r},set(s,r){n.set(s,r)},get size(){return n.size}}}function pe({itemCount:e,itemProps:t,itemSize:i}){return u.useMemo(()=>Ie({itemCount:e,itemProps:t,itemSize:i}),[e,t,i])}function we({containerSize:e,itemSize:t}){let i;switch(typeof t){case"string":{T(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),T(e!==void 0,"Container size must be defined if a percentage item size is specified"),i=e*parseInt(t)/100;break}default:{i=t;break}}return i}function ve({containerElement:e,containerStyle:t,defaultContainerSize:i=0,direction:n,isRtl:s=!1,itemCount:r,itemProps:a,itemSize:l,onResize:c,overscanCount:o}){const[d,f]=u.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:I,startIndexOverscan:g,stopIndexVisible:w,stopIndexOverscan:v}={startIndexVisible:Math.min(r-1,d.startIndexVisible),startIndexOverscan:Math.min(r-1,d.startIndexOverscan),stopIndexVisible:Math.min(r-1,d.stopIndexVisible),stopIndexOverscan:Math.min(r-1,d.stopIndexOverscan)},{height:m=i,width:y=i}=me({defaultHeight:i,defaultWidth:void 0,element:e,mode:"only-height",style:t}),R=u.useRef({height:0,width:0}),O=m,W=we({containerSize:O,itemSize:l});u.useLayoutEffect(()=>{if(typeof c=="function"){const b=R.current;(b.height!==m||b.width!==y)&&(c({height:m,width:y},{...b}),b.height=m,b.width=y)}},[m,c,y]);const S=pe({itemCount:r,itemProps:a,itemSize:W}),B=u.useCallback(b=>S.get(b),[S]),C=u.useCallback(()=>re({cachedBounds:S,itemCount:r,itemSize:W}),[S,r,W]),N=u.useCallback(b=>{const j=P({containerElement:e,direction:n,isRtl:s,scrollOffset:b});return X({cachedBounds:S,containerScrollOffset:j,containerSize:O,itemCount:r,overscanCount:o})},[S,e,O,n,s,r,o]);D(()=>{const b=e?.scrollTop??0;f(N(b))},[e,n,N]),D(()=>{if(!e)return;const b=()=>{f(j=>{const{scrollLeft:q,scrollTop:x}=e,p=P({containerElement:e,direction:n,isRtl:s,scrollOffset:x}),z=X({cachedBounds:S,containerScrollOffset:p,containerSize:O,itemCount:r,overscanCount:o});return $(z,j)?j:z})};return e.addEventListener("scroll",b),()=>{e.removeEventListener("scroll",b)}},[S,e,O,n,r,o]);const _=ge(({align:b="auto",containerScrollOffset:j,index:q})=>{let x=be({align:b,cachedBounds:S,containerScrollOffset:j,containerSize:O,index:q,itemCount:r,itemSize:W});if(e){if(x=P({containerElement:e,direction:n,isRtl:s,scrollOffset:x}),typeof e.scrollTo!="function"){const p=N(x);$(d,p)||f(p)}return x}});return{getCellBounds:B,getEstimatedSize:C,scrollToIndex:_,startIndexOverscan:g,startIndexVisible:I,stopIndexOverscan:v,stopIndexVisible:w}}function xe(e){return u.useMemo(()=>e,Object.values(e))}function Se(e,t){const{ariaAttributes:i,style:n,...s}=e,{ariaAttributes:r,style:a,...l}=t;return $(i,r)&&$(n,a)&&$(s,l)}function ye(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const Ce="data-react-window-index";function ze({children:e,className:t,defaultHeight:i=0,listRef:n,onResize:s,onRowsRendered:r,overscanCount:a=3,rowComponent:l,rowCount:c,rowHeight:o,rowProps:d,tagName:f="div",style:I,...g}){const w=xe(d),v=u.useMemo(()=>u.memo(l,Se),[l]),[m,y]=u.useState(null),R=ye(o),O=u.useMemo(()=>R?x=>o.getRowHeight(x)??o.getAverageRowHeight():o,[R,o]),{getCellBounds:W,getEstimatedSize:S,scrollToIndex:B,startIndexOverscan:C,startIndexVisible:N,stopIndexOverscan:_,stopIndexVisible:b}=ve({containerElement:m,containerStyle:I,defaultContainerSize:i,direction:"vertical",itemCount:c,itemProps:w,itemSize:O,onResize:s,overscanCount:a});u.useImperativeHandle(n,()=>({get element(){return m},scrollToRow({align:x="auto",behavior:p="auto",index:z}){const G=B({align:x,containerScrollOffset:m?.scrollTop??0,index:z});typeof m?.scrollTo=="function"&&m.scrollTo({behavior:p,top:G})}}),[m,B]),D(()=>{if(!m)return;const x=Array.from(m.children).filter((p,z)=>{if(p.hasAttribute("aria-hidden"))return!1;const G=`${C+z}`;return p.setAttribute(Ce,G),!0});if(R)return o.observeRowElements(x)},[m,R,o,C,_]),u.useEffect(()=>{C>=0&&_>=0&&r&&r({startIndex:N,stopIndex:b},{startIndex:C,stopIndex:_})},[r,C,N,_,b]);const j=u.useMemo(()=>{const x=[];if(c>0)for(let p=C;p<=_;p++){const z=W(p);x.push(u.createElement(v,{...w,ariaAttributes:{"aria-posinset":p+1,"aria-setsize":c,role:"listitem"},key:p,index:p,style:{position:"absolute",left:0,transform:`translateY(${z.scrollOffset}px)`,height:R?void 0:z.size,width:"100%"}}))}return x},[v,W,R,c,w,C,_]),q=h.jsx("div",{"aria-hidden":!0,style:{height:S(),width:"100%",zIndex:-1}});return u.createElement(f,{role:"list",...g,className:t,ref:y,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...I}},j,e,q)}const Re="_virtualizedTable_p8hv0_14",Oe={virtualizedTable:Re},_e=({rowCount:e,rowComponent:t,rowHeight:i=48,height:n=600,className:s=""})=>{const r=a=>h.jsx(t,{...a});return h.jsx("div",{className:J(Oe.virtualizedTable,s),style:{height:n},children:h.jsx(ze,{rowComponent:r,rowCount:e,rowHeight:i,rowProps:{},role:"presentation",style:{width:"100%",height:n}})})},je="_card_1kivg_14",Ee={card:je},oe=u.forwardRef(({children:e,className:t,as:i="div",...n},s)=>h.jsx(i,{ref:s,className:J(Ee.card,t),...n,children:e}));oe.displayName="Card";const ae=(e,t)=>e.position===t.position&&e.top===t.top&&e.left===t.left&&e.width===t.width&&e.height===t.height,ke=()=>(e,t)=>{if(e.index!==t.index)return!1;const i=e.style,n=t.style;return ae(i,n)},Me=(e,t)=>(e.displayName===void 0&&("$$typeof"in e&&e.$$typeof?.toString().includes("Memo")?Object.assign(e,{displayName:t}):e.displayName=t),e),Te="_row_q17h6_14",We="_dataCard_q17h6_24",Ne="_dataCardSelected_q17h6_63",Ve="_dataCardFlash_q17h6_69",H={row:Te,dataCard:We,dataCardSelected:Ne,dataCardFlash:Ve},Ae=({items:e,style:t,gap:i=8,renderItem:n,rowIndex:s})=>{if(!e?.length)return h.jsx("div",{className:H.row,style:t});const a=(Number(t.height)||48)-i*2;return h.jsx("div",{className:H.row,style:{...t,"--row-gap":`${i}px`,"--card-size":`${a}px`},children:e.map((l,c)=>h.jsx("div",{children:n(l)},c+s))})},ce=u.memo(Ae,(e,t)=>e.rowIndex!==t.rowIndex||e.gap!==t.gap||e.items!==t.items||e.renderItem!==t.renderItem?!1:ae(e.style,t.style));Me(ce,"Row");const $e=u.memo(({value:e,onToggle:t,isFlashing:i=!1,className:n})=>{const[s,r]=u.useState(!1),a=u.useCallback(()=>{r(!0),t?.()},[t]),l=u.useCallback(c=>{(c.key==="Enter"||c.key===" ")&&a()},[a]);return ue(()=>{r(!1)},s?200:null),h.jsx("div",{className:J(H.dataCard,{[H.dataCardSelected]:s},{[H.dataCardFlash]:i},n),role:"button",tabIndex:0,"aria-pressed":s,onClick:a,onKeyDown:l,children:e})}),He=Object.freeze([]),ee=e=>{let t;const i=new Set,n=(o,d)=>{const f=typeof o=="function"?o(t):o;if(!Object.is(f,t)){const I=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),i.forEach(g=>g(t,I))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>c,subscribe:o=>(i.add(o),()=>i.delete(o))},c=t=e(n,s,l);return l},Fe=(e=>e?ee(e):ee),De=e=>e;function Be(e,t=De){const i=L.useSyncExternalStore(e.subscribe,L.useCallback(()=>t(e.getState()),[e,t]),L.useCallback(()=>t(e.getInitialState()),[e,t]));return L.useDebugValue(i),i}const te=e=>{const t=Fe(e),i=n=>Be(t,n);return Object.assign(i,t),i},qe=(e=>e?te(e):te),Le=e=>(t,i,n)=>{const s=n.subscribe;return n.subscribe=((a,l,c)=>{let o=a;if(l){const d=c?.equalityFn||Object.is;let f=a(n.getState());o=I=>{const g=a(I);if(!d(f,g)){const w=f;l(f=g,w)}},c?.fireImmediately&&l(f,f)}return s(o)}),e(t,i,n)},Ue=Le;let le=0;const Ye=e=>Array.from({length:e},()=>({id:le++,value:Math.random()>.5?1:0}));let A=null,k=null,F=null,V=null,Y=0;const Z=100,ne=1e4,se=e=>{typeof requestIdleCallback<"u"?requestIdleCallback(e,{timeout:5}):setTimeout(e,0)},Ge=async e=>{if(e===0)return Promise.resolve();if(A&&k&&Y===e||V&&Y===e)return V;Y=e,A=null,k=null,F=null,V=null,le=0;const t=Math.ceil(ne/Z);return V=new Promise(i=>{const n=[];let s=0;const r=()=>{const a=s*Z,c=Math.min(a+Z,ne)-a,o=Ye(c);n.push(...o),s++,s<t?se(r):(A=Object.fromEntries(n.map(d=>[d.id,d])),k=n.map(d=>d.id),F=Array.from({length:Math.ceil(k.length/e)},(d,f)=>k.slice(f*e,(f+1)*e)),i())};se(r)}),V},M=qe()(Ue((e,t)=>{const i=async n=>{n!==0&&(await Ge(n),A&&k&&F&&e({entities:A,entityIds:k,rows:F,itemsPerRow:n}))};return{entities:A||{},entityIds:k||[],rows:F||[],itemsPerRow:Y,gap:8,visibleRowStartIndex:0,visibleRowStopIndex:20,flashingItemIds:{},toggleValue:n=>e(s=>{const r=s.entities[n];return r?{entities:{...s.entities,[n]:{...r,value:r.value===0?1:0}}}:s}),setItemsPerRow:n=>{t().itemsPerRow!==n&&i(n)},setVisibleRowRange:(n,s)=>{const r=t();(r.visibleRowStartIndex!==n||r.visibleRowStopIndex!==s)&&e({visibleRowStartIndex:n,visibleRowStopIndex:s})},getRowItemIds:n=>t().rows[n]||[],getEntityValue:n=>t().entities[n]?.value,triggerRandomFlash:(n=1)=>{e(s=>{if(!s.rows.length)return s;const r=s.visibleRowStartIndex,a=s.visibleRowStopIndex,l=[];for(let f=0;f<n;f++){const I=Math.floor(Math.random()*(a-r+1))+r,g=s.rows[I];if(g&&g.length>0){const w=Math.floor(Math.random()*g.length),v=g[w];v!==void 0&&!s.flashingItemIds[v]&&l.push(v)}}if(l.length===0)return s;const c={};l.forEach(f=>{c[f]=!0});const o={...s.flashingItemIds,...c},d=l;return setTimeout(()=>{e(f=>{const{flashingItemIds:I}=f,g=Object.fromEntries(Object.entries(I).filter(([w])=>!d.includes(Number(w))));return Object.keys(g).length===Object.keys(I).length?f:{flashingItemIds:g}})},300),{flashingItemIds:o}})},isItemFlashing:n=>t().flashingItemIds[n]===!0}})),Ke=8,de=u.memo(({itemId:e})=>{const t=M(r=>r.entities[e]?.value),i=M(r=>r.toggleValue),n=M(r=>r.flashingItemIds[e]===!0),s=u.useCallback(()=>{i(e)},[e,i]);return t===void 0?null:h.jsx($e,{value:t,onToggle:s,isFlashing:n})},(e,t)=>e.itemId===t.itemId);de.displayName="DataRowItem";const Pe=u.memo(({index:e,style:t})=>{const i=M(r=>r.rows),n=u.useMemo(()=>i[e]??He,[i,e]),s=u.useCallback(r=>h.jsx(de,{itemId:r}),[]);return n?.length?h.jsx(ce,{items:n,style:t,gap:Ke,renderItem:s,rowIndex:e}):h.jsx("div",{style:t})},ke()),Ze="_section_1o7sv_14",Je="_heading_1o7sv_25",Qe="_subheading_1o7sv_30",Xe="_loading_1o7sv_37",et="_dataContainer_1o7sv_41",tt="_headingWrapper_1o7sv_48",nt="_subheadingWrapper_1o7sv_55",st="_dataContainerWrapper_1o7sv_60",E={section:Ze,heading:Je,subheading:Qe,loading:Xe,dataContainer:et,headingWrapper:tt,subheadingWrapper:nt,dataContainerWrapper:st},ie=56,U=8,it=u.memo(()=>{const e=u.useRef(null),t=fe(e,{threshold:0}),i=u.useRef(null),n=he(i,!0).width,s=M(o=>o.rows.length),r=M(o=>o.itemsPerRow),a=M(o=>o.setItemsPerRow),l=M(o=>o.triggerRandomFlash);u.useEffect(()=>{if(!t)return;const o=setInterval(()=>{l(3)},150);return()=>{clearInterval(o)}},[t,l]),u.useEffect(()=>{const o=i.current;if(!o||n<=0)return;const d=window.getComputedStyle(o),f=parseFloat(d.paddingLeft)||0,I=parseFloat(d.paddingRight)||0,w=n-f-I-U*2,v=ie-U*2,m=Math.max(1,Math.floor((w+U)/(v+U)));m!==r&&a(m)},[n,r,a]);const c="data-intensive-heading";return h.jsxs("div",{className:E.section,ref:e,"aria-labelledby":c,children:[h.jsx("div",{className:E.headingWrapper,children:h.jsx(K,{id:c,variant:"h1",className:E.heading,children:"Data intensive"})}),h.jsx("div",{className:E.subheadingWrapper,children:h.jsxs(K,{variant:"subheading",className:E.subheading,color:"muted",children:[h.jsx(K,{as:"span",variant:"body",color:"primary",weight:"medium",children:"Issue:"})," ","Rendering ",s*r," data points"]})}),h.jsx(oe,{children:h.jsx("div",{ref:i,className:`${E.dataContainer} ${E.dataContainerWrapper}`,children:s>0?h.jsx(_e,{rowCount:s,rowComponent:Pe,rowHeight:ie,height:600}):h.jsx("div",{className:E.loading,children:"Loading data..."})})})]})});it.displayName="ThirdScreen";export{it as ThirdScreen};
