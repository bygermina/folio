import{r as e,M as Y,j as i,i as X,u as U,P as J,a as Q,b as Z,L as ee,c as te,d as ne,e as se,f as F,W as oe,B as L,m as ie,T as I,g as re}from"./index-BlVSbGVW.js";function $(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function ce(...t){return s=>{let n=!1;const r=t.map(c=>{const o=$(c,s);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let c=0;c<r.length;c++){const o=r[c];typeof o=="function"?o():$(t[c],null)}}}}function le(...t){return e.useCallback(ce(...t),t)}class ae extends e.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=n.offsetParent,c=X(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=c-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ue({children:t,isPresent:s,anchorX:n,root:r}){const c=e.useId(),o=e.useRef(null),d=e.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=e.useContext(Y),p=le(o,t?.ref);return e.useInsertionEffect(()=>{const{width:a,height:m,top:l,left:g,right:x}=d.current;if(s||!o.current||!a||!m)return;const v=n==="left"?`left: ${g}`:`right: ${x}`;o.current.dataset.motionPopId=c;const C=document.createElement("style");h&&(C.nonce=h);const _=r??document.head;return _.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${m}px !important;
            ${v}px !important;
            top: ${l}px !important;
          }
        `),()=>{_.contains(C)&&_.removeChild(C)}},[s]),i.jsx(ae,{isPresent:s,childRef:o,sizeRef:d,children:e.cloneElement(t,{ref:p})})}const de=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:c,presenceAffectsLayout:o,mode:d,anchorX:h,root:p})=>{const a=U(fe),m=e.useId();let l=!0,g=e.useMemo(()=>(l=!1,{id:m,initial:s,isPresent:n,custom:c,onExitComplete:x=>{a.set(x,!0);for(const v of a.values())if(!v)return;r&&r()},register:x=>(a.set(x,!1),()=>a.delete(x))}),[n,a,r]);return o&&l&&(g={...g}),e.useMemo(()=>{a.forEach((x,v)=>a.set(v,!1))},[n]),e.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),d==="popLayout"&&(t=i.jsx(ue,{isPresent:n,anchorX:h,root:p,children:t})),i.jsx(J.Provider,{value:g,children:t})};function fe(){return new Map}const T=t=>t.key||"";function P(t){const s=[];return e.Children.forEach(t,n=>{e.isValidElement(n)&&s.push(n)}),s}const me=({children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:c=!0,mode:o="sync",propagate:d=!1,anchorX:h="left",root:p})=>{const[a,m]=Q(d),l=e.useMemo(()=>P(t),[t]),g=d&&!a?[]:l.map(T),x=e.useRef(!0),v=e.useRef(l),C=U(()=>new Map),[_,u]=e.useState(l),[f,j]=e.useState(l);Z(()=>{x.current=!1,v.current=l;for(let b=0;b<f.length;b++){const E=T(f[b]);g.includes(E)?C.delete(E):C.get(E)!==!0&&C.set(E,!1)}},[f,g.length,g.join("-")]);const y=[];if(l!==_){let b=[...l];for(let E=0;E<f.length;E++){const R=f[E],B=T(R);g.includes(B)||(b.splice(E,0,R),y.push(R))}return o==="wait"&&y.length&&(b=y),j(P(b)),u(l),null}const{forceRender:w}=e.useContext(ee);return i.jsx(i.Fragment,{children:f.map(b=>{const E=T(b),R=d&&!a?!1:l===f||g.includes(E),B=()=>{if(C.has(E))C.set(E,!0);else return;let O=!0;C.forEach(K=>{K||(O=!1)}),O&&(w?.(),j(v.current),d&&m?.(),r&&r())};return i.jsx(de,{isPresent:R,initial:!x.current||n?void 0:!1,custom:s,presenceAffectsLayout:c,mode:o,root:p,onExitComplete:R?void 0:B,anchorX:h,children:b},E)})})},W=t=>{const s=t?.getBoundingClientRect();return{left:s?.left||0,right:s?.right||0,width:s?.width||0}},he=(t,s,n)=>{if(s===0||t.length===0)return t;const r=s+n*2,c=structuredClone(t),o=[...c];for(;o.length*n<r;)o.push(...c);return o},pe=t=>Array.from({length:t},()=>0),ge=(t,s,n,r)=>(c,o)=>c.map((d,h)=>{const p=t[h];if(!p)return d;const a=W(p);let m=d+o;return o<0&&a.right<s.left?m+=n*(a.width+r):o>0&&a.left>s.right&&(m-=n*(a.width+r)),m}),M=(t,s)=>{t.forEach((n,r)=>{if(!n)return;const c=s[r];n.style.transform=`translate3d(${c}px, 0, 0)`})},xe=.95,ve=.5,_e=2,Ce=25,Se=({setCircularAnimationPaused:t,translateX:s,slides:n,containerRef:r,updatePositions:c})=>{const o=e.useRef(0),d=e.useRef(!1),h=e.useRef(performance.now()),p=e.useRef(0),a=e.useRef(null),m=e.useRef(!1),l=e.useCallback(()=>{a.current&&cancelAnimationFrame(a.current),a.current=null,m.current=!1,d.current=!1,p.current=0,o.current=0,t(!1)},[t]);e.useEffect(()=>()=>l(),[l]);const g=e.useCallback(u=>{const f="touches"in u;if(f&&u.touches.length!==1)return;const j=f?u.touches[0].clientX:u.clientX;l(),t(!0),d.current=!0,h.current=performance.now(),o.current=j,p.current=0},[t,l]),x=e.useCallback(()=>{d.current=!1;let u=p.current;const f=()=>{Math.abs(u)>ve?(u*=xe,s.current=c(s.current,u),M(n,s.current),a.current=requestAnimationFrame(f)):l()};Math.abs(u)>_e?(m.current=!0,f()):l()},[c,l,n,s]),v=e.useCallback(u=>{if(!d.current)return;u.cancelable&&u.preventDefault();const f=u instanceof TouchEvent;if(f&&u.touches.length!==1)return;const j=f?u.touches[0].clientX:u.clientX,y=j-o.current;o.current=j,s.current=c(s.current,y),M(n,s.current);const w=performance.now(),b=w-h.current;p.current=y/b*Ce,h.current=w},[s,n,c]);e.useEffect(()=>{const u=r?.current;if(!u)return;u.addEventListener("touchmove",v,{passive:!1}),u.addEventListener("mousemove",v,{passive:!1});const f=()=>{d.current&&x()};return document.addEventListener("touchend",f),document.addEventListener("mouseup",f),()=>{u.removeEventListener("touchmove",v),u.removeEventListener("mousemove",v),document.removeEventListener("touchend",f),document.removeEventListener("mouseup",f)}},[r,v,x]);const C=e.useCallback(()=>{t(!0)},[t]),_=e.useCallback(()=>{t(!1)},[t]);return{domActions:{onTouchStart:g,onMouseDown:g,onTouchEnd:x,onMouseUp:x,onMouseEnter:C,onMouseLeave:_},stopAnimation:l}},Ee=({speed:t,side:s,slides:n,translateX:r,updatePositions:c,containerRef:o})=>{const[d,h]=e.useState(!1),a=te(o,{threshold:0})&&!d&&!!t;return ne(()=>{const m=s==="left"?-t:t;r.current=c(r.current,m),M(n,r.current)},a),{setCircularAnimationPaused:h}},V=t=>{const[s,n]=e.useState({left:0,right:0,width:0});return e.useEffect(()=>{const r=t.current;if(!r)return;const c=()=>{n({...W(r)})};c();const o=new ResizeObserver(c);return o.observe(r),()=>{o.disconnect()}},[t]),s},je="_container_1xiqd_14",ye="_slidesContainer_1xiqd_25",q={container:je,slidesContainer:ye},be=({speed:t,side:s="left",slides:n,slideWidth:r,renderSlide:c})=>{const o=e.useRef(null),d=e.useRef(null),h=e.useRef([]),p=e.useRef([]),{screenWidth:a}=se(),m=V(o),l=V(d),g=e.useMemo(()=>{const y=m.width||600;return he(n,y,r)},[m.width,n,r]),x=g.length,v=(l.width-x*r)/(x-1),C=e.useMemo(()=>ge(h.current,m,x,v),[m,x,v]),{setCircularAnimationPaused:_}=Ee({speed:t,side:s,slides:h.current,translateX:p,updatePositions:C,containerRef:o}),{domActions:u,stopAnimation:f}=Se({setCircularAnimationPaused:_,translateX:p,slides:h.current,containerRef:o,updatePositions:C});e.useEffect(()=>{(()=>{f(),p.current=pe(x),M(h.current,p.current)})()},[a,x,f,t,s]);const j=e.useCallback(y=>w=>{h.current[y]=w},[]);return i.jsx("div",{ref:o,className:q.container,...u,children:i.jsx("div",{ref:d,className:q.slidesContainer,children:g.map((y,w)=>c(y,w,j(w)))})})},we=t=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...t},e.createElement("defs",null,e.createElement("style",null,`
      .react-stroke { stroke: currentColor; stroke-width: 16; fill: none; }
      .react-fill { fill: currentColor; }
    `)),e.createElement("circle",{cx:128,cy:128,r:20,className:"react-fill"}),e.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}),e.createElement("g",{transform:"rotate(60 128 128)"},e.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40})),e.createElement("g",{transform:"rotate(-60 128 128)"},e.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}))),Re=t=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...t},e.createElement("defs",null,e.createElement("style",null,`
      .ts-fill { fill: currentColor; }
      .ts-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 120px; }
    `)),e.createElement("rect",{className:"ts-fill",x:0,y:0,width:256,height:256,rx:20}),e.createElement("text",{className:"ts-text",x:128,y:180,textAnchor:"middle",dominantBaseline:"central"},"TS")),Ne=t=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...t},e.createElement("defs",null,e.createElement("style",null,`
      .node-fill { fill: currentColor; }
      .node-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 80px; }
    `)),e.createElement("circle",{className:"node-fill",cx:128,cy:128,r:100}),e.createElement("text",{className:"node-text",x:128,y:160,textAnchor:"middle",dominantBaseline:"central"},"node")),Ie="_root_1j2cc_14",Le="_content_1j2cc_23",Te="_icon_1j2cc_71",ze="_text_1j2cc_76",z={root:Ie,content:Le,icon:Te,text:ze},ke={reactlogo:we,typescript:Re,nodejs:Ne},G=e.forwardRef(({query:t,image:s,width:n=20,height:r=20,...c},o)=>{const d=ke[s];return d?i.jsx("div",{ref:o,className:z.root,children:i.jsxs("div",{"aria-label":t,className:F(z.content,"surface-transparent"),children:[i.jsx(d,{...c,width:n,height:r,viewBox:"0 0 256 256",className:z.icon}),i.jsx("div",{className:z.text,children:t})]})}):null});G.displayName="SlideContent";const Me=e.memo(G),Ae="_label_j3vid_14",Be="_input_j3vid_21",De="_inputRange_j3vid_36",Fe="_inputText_j3vid_59",k={label:Ae,input:Be,inputRange:De,inputText:Fe},Oe=({label:t,id:s,valueDisplay:n,showValue:r=!0,className:c,labelClassName:o,inputClassName:d,type:h="text",...p})=>{const a=s||`input-${t.toLowerCase().replace(/\s+/g,"-")}`,m=n!==void 0?n:p.value?.toString(),l=h==="range"?k.inputRange:k.inputText;return i.jsxs("div",{className:c,children:[i.jsxs("label",{htmlFor:a,className:F(k.label,o),children:[t,r&&m&&`: ${m}`]}),i.jsx("input",{id:a,type:h,...p,className:F(k.input,l,d)})]})},$e="_root_zlkjm_14",Pe="_button_zlkjm_19",Ve="_panel_zlkjm_26",qe="_title_zlkjm_58",He="_section_zlkjm_62",Ue="_label_zlkjm_70",We="_directionGroup_zlkjm_80",Ge="_directionButton_zlkjm_87",Ke="_slidesContainer_zlkjm_91",Ye="_slide_zlkjm_91",Xe="_slideIndex_zlkjm_112",Je="_input_zlkjm_116",Qe="_select_zlkjm_117",Ze="_applyButton_zlkjm_141",S={root:$e,button:Pe,panel:Ve,title:qe,section:He,label:Ue,directionGroup:We,directionButton:Ge,slidesContainer:Ke,slide:Ye,slideIndex:Xe,input:Je,select:Qe,applyButton:Ze},D={MIN:.1,MAX:3,STEP:.1},et=({onUpdate:t,initialSlides:s,initialSpeed:n,initialSide:r})=>{const[c,o]=e.useTransition(),[d,h]=e.useState(!1),[p,a]=e.useState(n),[m,l]=e.useState(r),[g,x]=e.useState(s);e.useEffect(()=>{const _=document.getElementById("js-animations");if(!_)return;const u=new IntersectionObserver(([f])=>{f.isIntersecting||h(!1)},{threshold:.01});return u.observe(_),()=>{u.unobserve(_)}},[]);const v=(_,u,f)=>{const j=[...g];j[_]={...j[_],[u]:f},x(j)},C=()=>{o(()=>{t({slides:g,speed:p,side:m})}),h(!1)};return i.jsxs(i.Fragment,{children:[i.jsx(oe,{children:i.jsx("div",{className:S.root,children:i.jsx(L,{variant:"magic",onClick:()=>h(!d),className:S.button,"aria-expanded":d,"aria-controls":"slider-configuration-panel",children:d?"✕ Close":"⚙️ Configure Slider"})})}),i.jsx(me,{children:d&&i.jsxs(ie.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:S.panel,role:"dialog","aria-modal":"false","aria-labelledby":"slider-configuration-title",id:"slider-configuration-panel",children:[i.jsx(I,{variant:"h3",size:"lg",weight:"bold",color:"primary",className:S.title,id:"slider-configuration-title",children:"Slider Configuration"}),i.jsxs("div",{className:S.section,children:[i.jsx(Oe,{label:"Speed",type:"range",min:D.MIN,max:D.MAX,step:D.STEP,value:p,valueDisplay:p.toFixed(1),onChange:_=>a(Number(_.target.value))}),i.jsxs("div",{children:[i.jsx(I,{variant:"label",className:S.label,color:"muted",children:"Direction"}),i.jsxs("div",{className:S.directionGroup,children:[i.jsx(L,{variant:"toggle",isActive:m==="left",onClick:()=>l("left"),className:S.directionButton,children:"← Left"}),i.jsx(L,{variant:"toggle",isActive:m==="right",onClick:()=>l("right"),className:S.directionButton,children:"Right →"})]})]}),i.jsxs("div",{children:[i.jsx(I,{variant:"label",className:S.label,color:"muted",children:"Slide Content"}),i.jsx("div",{className:S.slidesContainer,children:g.map((_,u)=>i.jsxs("div",{className:S.slide,children:[i.jsxs(I,{variant:"caption",className:S.slideIndex,children:["Slide ",u+1]}),i.jsx("input",{type:"text",value:_.query,onChange:f=>v(u,"query",f.target.value),placeholder:"Slide text",className:S.input}),i.jsxs("select",{value:_.image,onChange:f=>v(u,"image",f.target.value),className:S.select,children:[i.jsx("option",{value:"reactlogo",children:"React Logo"}),i.jsx("option",{value:"typescript",children:"TypeScript Logo"}),i.jsx("option",{value:"nodejs",children:"Node.js Logo"})]})]},u))})]}),i.jsx(L,{onClick:C,variant:"primary",className:S.applyButton,disabled:c,children:c?"Applying...":"Apply Changes"})]})]})})]})},H=[{query:"Spin it up",image:"reactlogo"},{query:"Type it safe",image:"typescript"},{query:"Run it fast",image:"nodejs"}],A={MOBILE:200,DESKTOP:200},tt="_root_an1zd_14",nt="_content_an1zd_24",st="_header_an1zd_34",ot="_title_an1zd_40",it="_subtitle_an1zd_44",rt="_sliderContainer_an1zd_49",N={root:tt,content:nt,header:st,title:ot,subtitle:it,sliderContainer:rt},ct=6,lt=["#06B6D4","#3B82F6","#A855F7","#6366F1","#7DD3FC","#8B5CF6"],at=Array.from({length:ct},(t,s)=>s),ut=lt.map(t=>({"--slider-color":t,"--slide-width-mobile":`${A.MOBILE}px`,"--slide-width-desktop":`${A.DESKTOP}px`})),ft=()=>{const{isMobile:t}=re(),s=t?A.MOBILE:A.DESKTOP,n=e.useRef(null),[r,c]=e.useState(!1);e.useEffect(()=>{if(!n.current)return;const l=new IntersectionObserver(([g])=>{c(g.isIntersecting&&g.intersectionRatio>.1)},{threshold:[0,.1,.5,1],rootMargin:"0px"});return l.observe(n.current),()=>{l.disconnect()}},[]);const[,o]=e.useTransition(),[d,h]=e.useState({slides:H,speed:.6,side:"left"}),p=l=>{o(()=>{h(l)})},a=e.useDeferredValue(d),m="js-animations-heading";return i.jsx("section",{ref:n,className:N.root,"aria-labelledby":m,children:i.jsxs("div",{className:N.content,children:[i.jsxs("div",{className:N.header,children:[i.jsx(I,{id:m,variant:"h2",size:"3xl",weight:"bold",className:N.title,children:"Reusable components with JS animations"}),i.jsx(I,{variant:"body",className:N.subtitle,color:"muted",children:"Configure your own slider"})]}),i.jsx(et,{onUpdate:p,initialSlides:H,initialSpeed:.6,initialSide:"left"}),at.map(l=>i.jsx("div",{className:N.sliderContainer,style:ut[l],children:i.jsx(be,{slides:a.slides,speed:r?a.speed:0,side:a.side,slideWidth:s,renderSlide:(g,x,v)=>i.jsx(Me,{ref:v,...g},x)})},l))]})})};export{ft as AnimationsShowcaseWidget};
