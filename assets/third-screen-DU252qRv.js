import{r as f,j as h,e as re,g as ue,R as q,c as fe,h as he,m as K,T as P}from"./index-BW2OAefr.js";const D=typeof window<"u"?f.useLayoutEffect:f.useEffect;function Q(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function me({box:e,defaultHeight:t,defaultWidth:i,disabled:n,element:s,mode:r,style:a}){const{styleHeight:l,styleWidth:c}=f.useMemo(()=>({styleHeight:Q(a?.height),styleWidth:Q(a?.width)}),[a?.height,a?.width]),[o,d]=f.useState({height:t,width:i}),u=n||l!==void 0||r==="only-width"||l!==void 0&&c!==void 0;return D(()=>{if(s===null||u)return;const I=new ResizeObserver(g=>{for(const x of g){const{contentRect:v,target:m}=x;s===m&&d(S=>S.height===v.height&&S.width===v.width?S:{height:v.height,width:v.width})}});return I.observe(s,{box:e}),()=>{I?.unobserve(s)}},[e,u,s,l,c]),f.useMemo(()=>({height:l??o.height,width:c??o.width}),[o,l,c])}function ge(e){const t=f.useRef(()=>{throw new Error("Cannot call during render.")});return D(()=>{t.current=e},[e]),f.useCallback(i=>t.current?.(i),[t])}function Z({containerElement:e,direction:t,isRtl:i,scrollOffset:n}){return n}function M(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function H(e,t){if(e===t)return!0;if(!!e!=!!t||(M(e!==void 0),M(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const i in e)if(!Object.is(t[i],e[i]))return!1;return!0}function oe({cachedBounds:e,itemCount:t,itemSize:i}){if(t===0)return 0;if(typeof i=="number")return t*i;{const n=e.get(e.size===0?0:e.size-1);M(n!==void 0,"Unexpected bounds cache miss");const s=(n.scrollOffset+n.size)/e.size;return t*s}}function be({align:e,cachedBounds:t,index:i,itemCount:n,itemSize:s,containerScrollOffset:r,containerSize:a}){if(i<0||i>=n)throw RangeError(`Invalid index specified: ${i}`,{cause:`Index ${i} is not within the range of 0 - ${n-1}`});const l=oe({cachedBounds:t,itemCount:n,itemSize:s}),c=t.get(i),o=Math.max(0,Math.min(l-a,c.scrollOffset)),d=Math.max(0,c.scrollOffset-a+c.size);switch(e==="smart"&&(r>=d&&r<=o?e="auto":e="center"),e){case"start":return o;case"end":return d;case"center":return c.scrollOffset<=a/2?0:c.scrollOffset+c.size/2>=l-a/2?l-a:c.scrollOffset+c.size/2-a/2;case"auto":default:return r>=d&&r<=o?r:r<d?d:o}}function X({cachedBounds:e,containerScrollOffset:t,containerSize:i,itemCount:n,overscanCount:s}){const r=n-1;let a=0,l=-1,c=0,o=-1,d=0;for(;d<r;){const u=e.get(d);if(u.scrollOffset+u.size>t)break;d++}for(a=d,c=Math.max(0,a-s);d<r;){const u=e.get(d);if(u.scrollOffset+u.size>=t+i)break;d++}return l=Math.min(r,d),o=Math.min(n-1,l+s),a<0&&(a=0,l=-1,c=0,o=-1),{startIndexVisible:a,stopIndexVisible:l,startIndexOverscan:c,stopIndexOverscan:o}}function Ie({itemCount:e,itemProps:t,itemSize:i}){const n=new Map;return{get(s){for(M(s<e,`Invalid index ${s}`);n.size-1<s;){const a=n.size;let l;switch(typeof i){case"function":{l=i(a,t);break}case"number":{l=i;break}}if(a===0)n.set(a,{size:l,scrollOffset:0});else{const c=n.get(a-1);M(c!==void 0,`Unexpected bounds cache miss for index ${s}`),n.set(a,{scrollOffset:c.scrollOffset+c.size,size:l})}}const r=n.get(s);return M(r!==void 0,`Unexpected bounds cache miss for index ${s}`),r},set(s,r){n.set(s,r)},get size(){return n.size}}}function we({itemCount:e,itemProps:t,itemSize:i}){return f.useMemo(()=>Ie({itemCount:e,itemProps:t,itemSize:i}),[e,t,i])}function xe({containerSize:e,itemSize:t}){let i;switch(typeof t){case"string":{M(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),M(e!==void 0,"Container size must be defined if a percentage item size is specified"),i=e*parseInt(t)/100;break}default:{i=t;break}}return i}function ve({containerElement:e,containerStyle:t,defaultContainerSize:i=0,direction:n,isRtl:s=!1,itemCount:r,itemProps:a,itemSize:l,onResize:c,overscanCount:o}){const[d,u]=f.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:I,startIndexOverscan:g,stopIndexVisible:x,stopIndexOverscan:v}={startIndexVisible:Math.min(r-1,d.startIndexVisible),startIndexOverscan:Math.min(r-1,d.startIndexOverscan),stopIndexVisible:Math.min(r-1,d.stopIndexVisible),stopIndexOverscan:Math.min(r-1,d.stopIndexOverscan)},{height:m=i,width:S=i}=me({defaultHeight:i,defaultWidth:void 0,element:e,mode:"only-height",style:t}),R=f.useRef({height:0,width:0}),O=m,T=xe({containerSize:O,itemSize:l});f.useLayoutEffect(()=>{if(typeof c=="function"){const b=R.current;(b.height!==m||b.width!==S)&&(c({height:m,width:S},{...b}),b.height=m,b.width=S)}},[m,c,S]);const y=we({itemCount:r,itemProps:a,itemSize:T}),B=f.useCallback(b=>y.get(b),[y]),z=f.useCallback(()=>oe({cachedBounds:y,itemCount:r,itemSize:T}),[y,r,T]),V=f.useCallback(b=>{const k=Z({containerElement:e,direction:n,isRtl:s,scrollOffset:b});return X({cachedBounds:y,containerScrollOffset:k,containerSize:O,itemCount:r,overscanCount:o})},[y,e,O,n,s,r,o]);D(()=>{const b=e?.scrollTop??0;u(V(b))},[e,n,V]),D(()=>{if(!e)return;const b=()=>{u(k=>{const{scrollLeft:L,scrollTop:p}=e,w=Z({containerElement:e,direction:n,isRtl:s,scrollOffset:p}),C=X({cachedBounds:y,containerScrollOffset:w,containerSize:O,itemCount:r,overscanCount:o});return H(C,k)?k:C})};return e.addEventListener("scroll",b),()=>{e.removeEventListener("scroll",b)}},[y,e,O,n,r,o]);const j=ge(({align:b="auto",containerScrollOffset:k,index:L})=>{let p=be({align:b,cachedBounds:y,containerScrollOffset:k,containerSize:O,index:L,itemCount:r,itemSize:T});if(e){if(p=Z({containerElement:e,direction:n,isRtl:s,scrollOffset:p}),typeof e.scrollTo!="function"){const w=V(p);H(d,w)||u(w)}return p}});return{getCellBounds:B,getEstimatedSize:z,scrollToIndex:j,startIndexOverscan:g,startIndexVisible:I,stopIndexOverscan:v,stopIndexVisible:x}}function pe(e){return f.useMemo(()=>e,Object.values(e))}function ye(e,t){const{ariaAttributes:i,style:n,...s}=e,{ariaAttributes:r,style:a,...l}=t;return H(i,r)&&H(n,a)&&H(s,l)}function Se(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const ze="data-react-window-index";function Ce({children:e,className:t,defaultHeight:i=0,listRef:n,onResize:s,onRowsRendered:r,overscanCount:a=3,rowComponent:l,rowCount:c,rowHeight:o,rowProps:d,tagName:u="div",style:I,...g}){const x=pe(d),v=f.useMemo(()=>f.memo(l,ye),[l]),[m,S]=f.useState(null),R=Se(o),O=f.useMemo(()=>R?p=>o.getRowHeight(p)??o.getAverageRowHeight():o,[R,o]),{getCellBounds:T,getEstimatedSize:y,scrollToIndex:B,startIndexOverscan:z,startIndexVisible:V,stopIndexOverscan:j,stopIndexVisible:b}=ve({containerElement:m,containerStyle:I,defaultContainerSize:i,direction:"vertical",itemCount:c,itemProps:x,itemSize:O,onResize:s,overscanCount:a});f.useImperativeHandle(n,()=>({get element(){return m},scrollToRow({align:p="auto",behavior:w="auto",index:C}){const G=B({align:p,containerScrollOffset:m?.scrollTop??0,index:C});typeof m?.scrollTo=="function"&&m.scrollTo({behavior:w,top:G})}}),[m,B]),D(()=>{if(!m)return;const p=Array.from(m.children).filter((w,C)=>{if(w.hasAttribute("aria-hidden"))return!1;const G=`${z+C}`;return w.setAttribute(ze,G),!0});if(R)return o.observeRowElements(p)},[m,R,o,z,j]),f.useEffect(()=>{z>=0&&j>=0&&r&&r({startIndex:V,stopIndex:b},{startIndex:z,stopIndex:j})},[r,z,V,j,b]);const k=f.useMemo(()=>{const p=[];if(c>0)for(let w=z;w<=j;w++){const C=T(w);p.push(f.createElement(v,{...x,ariaAttributes:{"aria-posinset":w+1,"aria-setsize":c,role:"listitem"},key:w,index:w,style:{position:"absolute",left:0,transform:`translateY(${C.scrollOffset}px)`,height:R?void 0:C.size,width:"100%"}}))}return p},[v,T,R,c,x,z,j]),L=h.jsx("div",{"aria-hidden":!0,style:{height:y(),width:"100%",zIndex:-1}});return f.createElement(u,{role:"list",...g,className:t,ref:S,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...I}},k,e,L)}const Re="_virtualizedTable_1k3ib_14",Oe={virtualizedTable:Re},je=({rowCount:e,rowComponent:t,rowHeight:i=48,height:n=600,className:s=""})=>{const r=a=>h.jsx(t,{...a});return h.jsx("div",{className:re(Oe.virtualizedTable,s),style:{height:n},children:h.jsx(Ce,{rowComponent:r,rowCount:e,rowHeight:i,rowProps:{},role:"presentation",style:{width:"100%",height:n}})})},ae=(e,t)=>e.position===t.position&&e.top===t.top&&e.left===t.left&&e.width===t.width&&e.height===t.height,ke=()=>(e,t)=>{if(e.index!==t.index)return!1;const i=e.style,n=t.style;return ae(i,n)},Ee=(e,t)=>(e.displayName===void 0&&("$$typeof"in e&&e.$$typeof?.toString().includes("Memo")?Object.assign(e,{displayName:t}):e.displayName=t),e),_e="_row_z9ikb_14",Me="_dataCard_z9ikb_24",Te="_dataCardSelected_z9ikb_60",Ve="_dataCardFlash_z9ikb_66",F={row:_e,dataCard:Me,dataCardSelected:Te,dataCardFlash:Ve},Ae=({items:e,style:t,gap:i=8,renderItem:n,rowIndex:s})=>{if(!e?.length)return h.jsx("div",{className:F.row,style:t});const a=(Number(t.height)||48)-i*2;return h.jsx("div",{className:F.row,style:{...t,"--row-gap":`${i}px`,"--card-size":`${a}px`},children:e.map((l,c)=>h.jsx("div",{children:n(l)},c+s))})},ce=f.memo(Ae,(e,t)=>e.rowIndex!==t.rowIndex||e.gap!==t.gap||e.items!==t.items||e.renderItem!==t.renderItem?!1:ae(e.style,t.style));Ee(ce,"Row");const Ne=f.memo(({value:e,onToggle:t,isFlashing:i=!1,className:n})=>{const[s,r]=f.useState(!1),a=f.useCallback(()=>{r(!0),t?.()},[t]),l=f.useCallback(c=>{(c.key==="Enter"||c.key===" ")&&a()},[a]);return ue(()=>{r(!1)},s?200:null),h.jsx("div",{className:re(F.dataCard,s&&F.dataCardSelected,i&&F.dataCardFlash,n),role:"button",tabIndex:0,"aria-pressed":s,onClick:a,onKeyDown:l,children:e})}),$e=Object.freeze([]),ee=e=>{let t;const i=new Set,n=(o,d)=>{const u=typeof o=="function"?o(t):o;if(!Object.is(u,t)){const I=t;t=d??(typeof u!="object"||u===null)?u:Object.assign({},t,u),i.forEach(g=>g(t,I))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>c,subscribe:o=>(i.add(o),()=>i.delete(o))},c=t=e(n,s,l);return l},He=(e=>e?ee(e):ee),Fe=e=>e;function We(e,t=Fe){const i=q.useSyncExternalStore(e.subscribe,q.useCallback(()=>t(e.getState()),[e,t]),q.useCallback(()=>t(e.getInitialState()),[e,t]));return q.useDebugValue(i),i}const te=e=>{const t=He(e),i=n=>We(t,n);return Object.assign(i,t),i},De=(e=>e?te(e):te),Be=e=>(t,i,n)=>{const s=n.subscribe;return n.subscribe=((a,l,c)=>{let o=a;if(l){const d=c?.equalityFn||Object.is;let u=a(n.getState());o=I=>{const g=a(I);if(!d(u,g)){const x=u;l(u=g,x)}},c?.fireImmediately&&l(u,u)}return s(o)}),e(t,i,n)},Le=Be;let le=0;const qe=e=>Array.from({length:e},()=>({id:le++,value:Math.random()>.5?1:0}));let N=null,E=null,W=null,A=null,Y=0;const J=100,ne=1e4,se=e=>{typeof requestIdleCallback<"u"?requestIdleCallback(e,{timeout:5}):setTimeout(e,0)},Ue=async e=>{if(e===0)return Promise.resolve();if(N&&E&&Y===e||A&&Y===e)return A;Y=e,N=null,E=null,W=null,A=null,le=0;const t=Math.ceil(ne/J);return A=new Promise(i=>{const n=[];let s=0;const r=()=>{const a=s*J,c=Math.min(a+J,ne)-a,o=qe(c);n.push(...o),s++,s<t?se(r):(N=Object.fromEntries(n.map(d=>[d.id,d])),E=n.map(d=>d.id),W=Array.from({length:Math.ceil(E.length/e)},(d,u)=>E.slice(u*e,(u+1)*e)),i())};se(r)}),A},_=De()(Le((e,t)=>{const i=async n=>{n!==0&&(await Ue(n),N&&E&&W&&e({entities:N,entityIds:E,rows:W,itemsPerRow:n}))};return{entities:N||{},entityIds:E||[],rows:W||[],itemsPerRow:Y,gap:8,visibleRowStartIndex:0,visibleRowStopIndex:20,flashingItemIds:{},toggleValue:n=>e(s=>{const r=s.entities[n];return r?{entities:{...s.entities,[n]:{...r,value:r.value===0?1:0}}}:s}),setItemsPerRow:n=>{t().itemsPerRow!==n&&i(n)},setVisibleRowRange:(n,s)=>{const r=t();(r.visibleRowStartIndex!==n||r.visibleRowStopIndex!==s)&&e({visibleRowStartIndex:n,visibleRowStopIndex:s})},getRowItemIds:n=>t().rows[n]||[],getEntityValue:n=>t().entities[n]?.value,triggerRandomFlash:(n=1)=>{e(s=>{if(!s.rows.length)return s;const r=s.visibleRowStartIndex,a=s.visibleRowStopIndex,l=[];for(let u=0;u<n;u++){const I=Math.floor(Math.random()*(a-r+1))+r,g=s.rows[I];if(g&&g.length>0){const x=Math.floor(Math.random()*g.length),v=g[x];v!==void 0&&!s.flashingItemIds[v]&&l.push(v)}}if(l.length===0)return s;const c={};l.forEach(u=>{c[u]=!0});const o={...s.flashingItemIds,...c},d=l;return setTimeout(()=>{e(u=>{const{flashingItemIds:I}=u,g=Object.fromEntries(Object.entries(I).filter(([x])=>!d.includes(Number(x))));return Object.keys(g).length===Object.keys(I).length?u:{flashingItemIds:g}})},300),{flashingItemIds:o}})},isItemFlashing:n=>t().flashingItemIds[n]===!0}})),Ye=8,de=f.memo(({itemId:e})=>{const t=_(r=>r.entities[e]?.value),i=_(r=>r.toggleValue),n=_(r=>r.flashingItemIds[e]===!0),s=f.useCallback(()=>{i(e)},[e,i]);return t===void 0?null:h.jsx(Ne,{value:t,onToggle:s,isFlashing:n})},(e,t)=>e.itemId===t.itemId);de.displayName="DataRowItem";const Ge=f.memo(({index:e,style:t})=>{const i=_(r=>r.rows),n=f.useMemo(()=>i[e]??$e,[i,e]),s=f.useCallback(r=>h.jsx(de,{itemId:r}),[]);return n?.length?h.jsx(ce,{items:n,style:t,gap:Ye,renderItem:s,rowIndex:e}):h.jsx("div",{style:t})},ke()),Ke="_section_rrnbg_14",Pe="_heading_rrnbg_25",Ze="_subheading_rrnbg_30",Je="_loading_rrnbg_37",Qe="_dataContainer_rrnbg_41",$={section:Ke,heading:Pe,subheading:Ze,loading:Je,dataContainer:Qe},ie=56,U=8,Xe=f.memo(()=>{const e=f.useRef(null),t=fe(e,{threshold:0}),i=f.useRef(null),n=he(i,!0).width,s=_(o=>o.rows.length),r=_(o=>o.itemsPerRow),a=_(o=>o.setItemsPerRow),l=_(o=>o.triggerRandomFlash);f.useEffect(()=>{if(!t)return;const o=setInterval(()=>{l(3)},150);return()=>{clearInterval(o)}},[t,l]),f.useEffect(()=>{const o=i.current;if(!o||n<=0)return;const d=window.getComputedStyle(o),u=parseFloat(d.paddingLeft)||0,I=parseFloat(d.paddingRight)||0,x=n-u-I-U*2,v=ie-U*2,m=Math.max(1,Math.floor((x+U)/(v+U)));m!==r&&a(m)},[n,r,a]);const c="data-intensive-heading";return h.jsxs("section",{className:$.section,ref:e,"aria-labelledby":c,children:[h.jsx(K.div,{initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,delay:.3},children:h.jsx(P,{id:c,variant:"h1",className:$.heading,children:"Data intensive"})}),h.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:3.5},children:h.jsxs(P,{variant:"subheading",className:$.subheading,color:"muted",children:[h.jsx(P,{as:"span",variant:"body",color:"primary",weight:"medium",children:"Issue:"})," ","Rendering ",s*r," data points"]})}),h.jsx(K.div,{ref:i,className:$.dataContainer,initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:1},children:s>0?h.jsx(je,{rowCount:s,rowComponent:Ge,rowHeight:ie,height:600}):h.jsx("div",{className:$.loading,children:"Loading data..."})})]})});Xe.displayName="ThirdScreen";export{Xe as ThirdScreen};
