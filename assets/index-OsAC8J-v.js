import{r as t,M as X,j as i,i as J,u as W,P as Q,a as Z,b as ee,L as te,c as F,d as ne,e as se,f as $,T as I,B as M,W as oe,m as ie,g as re}from"./index-CaLDeMkd.js";function q(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function ce(...e){return n=>{let s=!1;const r=e.map(c=>{const o=q(c,n);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let c=0;c<r.length;c++){const o=r[c];typeof o=="function"?o():q(e[c],null)}}}}function le(...e){return t.useCallback(ce(...e),e)}class ae extends t.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const r=s.offsetParent,c=J(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft,o.right=c-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ue({children:e,isPresent:n,anchorX:s,root:r}){const c=t.useId(),o=t.useRef(null),a=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=t.useContext(X),f=le(o,e?.ref);return t.useInsertionEffect(()=>{const{width:l,height:h,top:u,left:x,right:m}=a.current;if(n||!o.current||!l||!h)return;const v=s==="left"?`left: ${x}`:`right: ${m}`;o.current.dataset.motionPopId=c;const _=document.createElement("style");d&&(_.nonce=d);const b=r??document.head;return b.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${h}px !important;
            ${v}px !important;
            top: ${u}px !important;
          }
        `),()=>{b.contains(_)&&b.removeChild(_)}},[n]),i.jsx(ae,{isPresent:n,childRef:o,sizeRef:a,children:t.cloneElement(e,{ref:f})})}const de=({children:e,initial:n,isPresent:s,onExitComplete:r,custom:c,presenceAffectsLayout:o,mode:a,anchorX:d,root:f})=>{const l=W(fe),h=t.useId();let u=!0,x=t.useMemo(()=>(u=!1,{id:h,initial:n,isPresent:s,custom:c,onExitComplete:m=>{l.set(m,!0);for(const v of l.values())if(!v)return;r&&r()},register:m=>(l.set(m,!1),()=>l.delete(m))}),[s,l,r]);return o&&u&&(x={...x}),t.useMemo(()=>{l.forEach((m,v)=>l.set(v,!1))},[s]),t.useEffect(()=>{!s&&!l.size&&r&&r()},[s]),a==="popLayout"&&(e=i.jsx(ue,{isPresent:s,anchorX:d,root:f,children:e})),i.jsx(Q.Provider,{value:x,children:e})};function fe(){return new Map}const L=e=>e.key||"";function P(e){const n=[];return t.Children.forEach(e,s=>{t.isValidElement(s)&&n.push(s)}),n}const he=({children:e,custom:n,initial:s=!0,onExitComplete:r,presenceAffectsLayout:c=!0,mode:o="sync",propagate:a=!1,anchorX:d="left",root:f})=>{const[l,h]=Z(a),u=t.useMemo(()=>P(e),[e]),x=a&&!l?[]:u.map(L),m=t.useRef(!0),v=t.useRef(u),_=W(()=>new Map),[b,g]=t.useState(u),[p,j]=t.useState(u);ee(()=>{m.current=!1,v.current=u;for(let w=0;w<p.length;w++){const S=L(p[w]);x.includes(S)?_.delete(S):_.get(S)!==!0&&_.set(S,!1)}},[p,x.length,x.join("-")]);const E=[];if(u!==b){let w=[...u];for(let S=0;S<p.length;S++){const R=p[S],D=L(R);x.includes(D)||(w.splice(S,0,R),E.push(R))}return o==="wait"&&E.length&&(w=E),j(P(w)),g(u),null}const{forceRender:y}=t.useContext(te);return i.jsx(i.Fragment,{children:p.map(w=>{const S=L(w),R=a&&!l?!1:u===p||x.includes(S),D=()=>{if(_.has(S))_.set(S,!0);else return;let O=!0;_.forEach(Y=>{Y||(O=!1)}),O&&(y?.(),j(v.current),a&&h?.(),r&&r())};return i.jsx(de,{isPresent:R,initial:!m.current||s?void 0:!1,custom:n,presenceAffectsLayout:c,mode:o,root:f,onExitComplete:R?void 0:D,anchorX:d,children:w},S)})})},G=e=>{const n=e?.getBoundingClientRect();return{left:n?.left||0,right:n?.right||0,width:n?.width||0}},pe=(e,n,s)=>{if(n===0||e.length===0)return e;const r=n+s*2,c=structuredClone(e),o=[...c];for(;o.length*s<r;)o.push(...c);return o},me=e=>Array.from({length:e},()=>0),ge=(e,n,s,r)=>(c,o)=>c.map((a,d)=>{const f=e[d];if(!f)return a;const l=G(f);let h=a+o;return o<0&&l.right<n.left?h+=s*(l.width+r):o>0&&l.left>n.right&&(h-=s*(l.width+r)),h}),k=(e,n)=>{e.forEach((s,r)=>{if(!s)return;const c=n[r];s.style.transform=`translate3d(${c}px, 0, 0)`})},xe=.95,ve=.5,_e=2,Ce=25,Ee=({setCircularAnimationPaused:e,translateX:n,slides:s,containerRef:r,updatePositions:c})=>{const o=t.useRef(0),a=t.useRef(!1),d=t.useRef(performance.now()),f=t.useRef(0),l=t.useRef(null),h=t.useRef(!1),u=t.useCallback(()=>{l.current&&cancelAnimationFrame(l.current),l.current=null,h.current=!1,a.current=!1,f.current=0,o.current=0,e(!1)},[e]);t.useEffect(()=>()=>u(),[u]);const x=t.useCallback(g=>{const p="touches"in g;if(p&&g.touches.length!==1)return;const j=p?g.touches[0].clientX:g.clientX;u(),e(!0),a.current=!0,d.current=performance.now(),o.current=j,f.current=0},[e,u]),m=t.useCallback(()=>{a.current=!1;let g=f.current;const p=()=>{Math.abs(g)>ve?(g*=xe,n.current=c(n.current,g),k(s,n.current),l.current=requestAnimationFrame(p)):u()};Math.abs(g)>_e?(h.current=!0,p()):u()},[c,u,s,n]),v=t.useCallback(g=>{if(!a.current)return;g.cancelable&&g.preventDefault();const p=g instanceof TouchEvent;if(p&&g.touches.length!==1)return;const j=p?g.touches[0].clientX:g.clientX,E=j-o.current;o.current=j,n.current=c(n.current,E),k(s,n.current);const y=performance.now(),w=y-d.current;f.current=E/w*Ce,d.current=y},[n,s,c]);t.useEffect(()=>{const g=r?.current;if(!g)return;g.addEventListener("touchmove",v,{passive:!1}),g.addEventListener("mousemove",v,{passive:!1});const p=()=>{a.current&&m()};return document.addEventListener("touchend",p),document.addEventListener("mouseup",p),()=>{g.removeEventListener("touchmove",v),g.removeEventListener("mousemove",v),document.removeEventListener("touchend",p),document.removeEventListener("mouseup",p)}},[r,v,m]);const _=t.useCallback(()=>{e(!0)},[e]),b=t.useCallback(()=>{e(!1)},[e]);return{domActions:{onTouchStart:x,onMouseDown:x,onTouchEnd:m,onMouseUp:m,onMouseEnter:_,onMouseLeave:b},stopAnimation:u}},Se=({speed:e,side:n,slides:s,translateX:r,updatePositions:c,containerRef:o})=>{const[a,d]=t.useState(!1),l=F(o,{threshold:0})&&!a&&!!e;return ne(()=>{const h=n==="left"?-e:e;r.current=c(r.current,h),k(s,r.current)},l),{setCircularAnimationPaused:d}},V=e=>{const[n,s]=t.useState({left:0,right:0,width:0});return t.useEffect(()=>{const r=e.current;if(!r)return;const c=()=>{s({...G(r)})};c();const o=new ResizeObserver(c);return o.observe(r),()=>{o.disconnect()}},[e]),n},ye="_container_3yn17_46",we="_slidesContainer_3yn17_57",H={container:ye,slidesContainer:we},be=({speed:e,side:n="left",slides:s,slideWidth:r,renderSlide:c})=>{const o=t.useRef(null),a=t.useRef(null),d=t.useRef([]),f=t.useRef([]),{screenWidth:l}=se(),h=V(o),u=V(a),x=t.useMemo(()=>{const E=h.width||600;return pe(s,E,r)},[h.width,s,r]),m=x.length,v=(u.width-m*r)/(m-1),_=t.useMemo(()=>ge(d.current,h,m,v),[h,m,v]),{setCircularAnimationPaused:b}=Se({speed:e,side:n,slides:d.current,translateX:f,updatePositions:_,containerRef:o}),{domActions:g,stopAnimation:p}=Ee({setCircularAnimationPaused:b,translateX:f,slides:d.current,containerRef:o,updatePositions:_});t.useEffect(()=>{(()=>{p(),f.current=me(m),k(d.current,f.current)})()},[l,m,p,e,n]);const j=t.useCallback(E=>y=>{d.current[E]=y},[]);return i.jsx("div",{ref:o,className:H.container,...g,children:i.jsx("div",{ref:a,className:H.slidesContainer,children:x.map((E,y)=>c(E,y,j(y)))})})},je=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .react-stroke { stroke: currentColor; stroke-width: 16; fill: none; }
      .react-fill { fill: currentColor; }
    `)),t.createElement("circle",{cx:128,cy:128,r:20,className:"react-fill"}),t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}),t.createElement("g",{transform:"rotate(60 128 128)"},t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40})),t.createElement("g",{transform:"rotate(-60 128 128)"},t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}))),Re=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .ts-fill { fill: currentColor; }
      .ts-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 120px; }
    `)),t.createElement("rect",{className:"ts-fill",x:0,y:0,width:256,height:256,rx:20}),t.createElement("text",{className:"ts-text",x:128,y:180,textAnchor:"middle",dominantBaseline:"central"},"TS")),Ne=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .node-fill { fill: currentColor; }
      .node-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 80px; }
    `)),t.createElement("circle",{className:"node-fill",cx:128,cy:128,r:100}),t.createElement("text",{className:"node-text",x:128,y:160,textAnchor:"middle",dominantBaseline:"central"},"node")),Ie="_root_1dk3i_46",Le="_content_1dk3i_55",Te="_icon_1dk3i_118",ze="_text_1dk3i_128",T={root:Ie,content:Le,icon:Te,text:ze},Me={reactlogo:je,typescript:Re,nodejs:Ne},K=t.forwardRef(({query:e,image:n,width:s=20,height:r=20,...c},o)=>{const a=Me[n];return a?i.jsx("div",{ref:o,className:T.root,children:i.jsxs("div",{"aria-label":e,className:$(T.content,"surface-transparent"),children:[i.jsx(a,{...c,width:s,height:r,viewBox:"0 0 256 256",className:T.icon}),i.jsx("div",{className:T.text,children:e})]})}):null});K.displayName="SlideContent";const ke=t.memo(K),Ae="_label_1osb7_46",De="_input_1osb7_53",Be="_inputRange_1osb7_73",$e="_inputText_1osb7_120",z={label:Ae,input:De,inputRange:Be,inputText:$e},Fe=({label:e,id:n,valueDisplay:s,showValue:r=!0,className:c,labelClassName:o,inputClassName:a,type:d="text",...f})=>{const l=n||`input-${e.toLowerCase().replace(/\s+/g,"-")}`,h=s!==void 0?s:f.value?.toString(),u=d==="range"?z.inputRange:z.inputText;return i.jsxs("div",{className:c,children:[i.jsxs("label",{htmlFor:l,className:$(z.label,o),children:[e,r&&h&&`: ${h}`]}),i.jsx("input",{id:l,type:d,...f,className:$(z.input,u,a)})]})},Oe="_root_1vgzq_46",qe="_button_1vgzq_51",Pe="_panel_1vgzq_58",Ve="_title_1vgzq_103",He="_section_1vgzq_107",Ue="_label_1vgzq_115",We="_directionGroup_1vgzq_125",Ge="_directionButton_1vgzq_132",Ke="_slidesContainer_1vgzq_136",Ye="_slide_1vgzq_136",Xe="_slideIndex_1vgzq_154",Je="_input_1vgzq_158",Qe="_select_1vgzq_159",Ze="_applyButton_1vgzq_183",C={root:Oe,button:qe,panel:Pe,title:Ve,section:He,label:Ue,directionGroup:We,directionButton:Ge,slidesContainer:Ke,slide:Ye,slideIndex:Xe,input:Je,select:Qe,applyButton:Ze},et=({side:e,onSideChange:n})=>i.jsxs("div",{children:[i.jsx(I,{variant:"label",className:C.label,color:"muted",children:"Direction"}),i.jsxs("div",{className:C.directionGroup,children:[i.jsx(M,{variant:"toggle",isActive:e==="left",onClick:()=>n("left"),className:C.directionButton,children:"← Left"}),i.jsx(M,{variant:"toggle",isActive:e==="right",onClick:()=>n("right"),className:C.directionButton,children:"Right →"})]})]}),tt=({slides:e,onSlideChange:n})=>i.jsx("div",{className:C.slidesContainer,children:e.map((s,r)=>i.jsxs("div",{className:C.slide,children:[i.jsxs(I,{variant:"caption",className:C.slideIndex,children:["Slide ",r+1]}),i.jsx("input",{type:"text",value:s.query,onChange:c=>n(r,"query",c.target.value),placeholder:"Slide text",className:C.input}),i.jsxs("select",{value:s.image,onChange:c=>n(r,"image",c.target.value),className:C.select,children:[i.jsx("option",{value:"reactlogo",children:"React Logo"}),i.jsx("option",{value:"typescript",children:"TypeScript Logo"}),i.jsx("option",{value:"nodejs",children:"Node.js Logo"})]})]},r))}),B={MIN:.1,MAX:3,STEP:.1},nt=({onUpdate:e,initialSlides:n,initialSpeed:s,initialSide:r,sectionRef:c})=>{const[o,a]=t.useTransition(),[d,f]=t.useState(!1),[l,h]=t.useState(s),[u,x]=t.useState(r),[m,v]=t.useState(n);!F(c,{threshold:.01})&&d&&f(!1);const b=(p,j,E)=>{const y=[...m];y[p]={...y[p],[j]:E},v(y)},g=()=>{a(()=>{e({slides:m,speed:l,side:u})}),f(!1)};return i.jsxs(i.Fragment,{children:[i.jsx(oe,{children:i.jsx("div",{className:C.root,children:i.jsx(M,{variant:"magic",onClick:()=>f(!d),className:C.button,"aria-expanded":d,"aria-controls":"slider-configuration-panel",children:d?"✕ Close":"⚙️ Configure Slider"})})}),i.jsx(he,{children:d&&i.jsxs(ie.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:C.panel,role:"dialog","aria-modal":"false","aria-labelledby":"slider-configuration-title",id:"slider-configuration-panel",children:[i.jsx(I,{variant:"h3",size:"lg",weight:"bold",color:"primary",className:C.title,id:"slider-configuration-title",children:"Slider Configuration"}),i.jsxs("div",{className:C.section,children:[i.jsx(Fe,{label:"Speed",type:"range",min:B.MIN,max:B.MAX,step:B.STEP,value:l,valueDisplay:l.toFixed(1),onChange:p=>h(Number(p.target.value))}),i.jsx(et,{side:u,onSideChange:x}),i.jsxs("div",{children:[i.jsx(I,{variant:"label",className:C.label,color:"muted",children:"Slide Content"}),i.jsx(tt,{slides:m,onSlideChange:b})]}),i.jsx(M,{onClick:g,variant:"primary",className:C.applyButton,disabled:o,children:o?"Applying...":"Apply Changes"})]})]})})]})},U=[{query:"Spin it up",image:"reactlogo"},{query:"Type it safe",image:"typescript"},{query:"Run it fast",image:"nodejs"}],A={MOBILE:200,DESKTOP:200},st="_root_ufcw9_46",ot="_content_ufcw9_54",it="_header_ufcw9_64",rt="_title_ufcw9_70",ct="_subtitle_ufcw9_74",lt="_sliderContainer_ufcw9_79",N={root:st,content:ot,header:it,title:rt,subtitle:ct,sliderContainer:lt},at=6,ut=["#22D3EE","#06B6D4","#0891B2","#0E7490","#155E75","#164E63"],dt=Array.from({length:at},(e,n)=>n),ft=ut.map(e=>({"--slider-color":e,"--slide-width-mobile":`${A.MOBILE}px`,"--slide-width-desktop":`${A.DESKTOP}px`})),pt=()=>{const{isMobile:e}=re(),n=e?A.MOBILE:A.DESKTOP,s=t.useRef(null),r=F(s,{threshold:.1}),[,c]=t.useTransition(),[o,a]=t.useState({slides:U,speed:.6,side:"left"}),d=h=>{c(()=>{a(h)})},f=t.useDeferredValue(o),l="js-animations-heading";return i.jsx("section",{ref:s,className:N.root,"aria-labelledby":l,children:i.jsxs("div",{className:N.content,children:[i.jsxs("div",{className:N.header,children:[i.jsx(I,{id:l,variant:"h2",size:"3xl",weight:"bold",className:N.title,children:"Reusable components with JS animations"}),i.jsx(I,{variant:"body",className:N.subtitle,color:"muted",children:"Configure your own slider"})]}),i.jsx(nt,{onUpdate:d,initialSlides:U,initialSpeed:.6,initialSide:"left",sectionRef:s}),dt.map(h=>i.jsx("div",{className:N.sliderContainer,style:ft[h],children:i.jsx(be,{slides:f.slides,speed:r?f.speed:0,side:f.side,slideWidth:n,renderSlide:(u,x,m)=>i.jsx(ke,{ref:m,...u},x)})},h))]})})};export{pt as AnimationsShowcaseWidget};
