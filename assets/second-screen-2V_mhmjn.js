import{r as e,M as X,j as o,i as J,u as H,P as Q,a as Z,b as ee,L as te,c as U,d as O,W as ne,B as L,m as se,T as N,e as re}from"./index-BJtNoAdR.js";import{u as oe}from"./use-element-visible-BkthuOeB.js";function z(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function ie(...t){return s=>{let n=!1;const i=t.map(l=>{const r=z(l,s);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let l=0;l<i.length;l++){const r=i[l];typeof r=="function"?r():z(t[l],null)}}}}function ce(...t){return e.useCallback(ie(...t),t)}class le extends e.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const i=n.offsetParent,l=J(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=l-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ae({children:t,isPresent:s,anchorX:n,root:i}){const l=e.useId(),r=e.useRef(null),a=e.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=e.useContext(X),u=ce(r,t?.ref);return e.useInsertionEffect(()=>{const{width:c,height:f,top:x,left:g,right:_}=a.current;if(s||!r.current||!c||!f)return;const p=n==="left"?`left: ${g}`:`right: ${_}`;r.current.dataset.motionPopId=l;const m=document.createElement("style");h&&(m.nonce=h);const E=i??document.head;return E.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${p}px !important;
            top: ${x}px !important;
          }
        `),()=>{E.contains(m)&&E.removeChild(m)}},[s]),o.jsx(le,{isPresent:s,childRef:r,sizeRef:a,children:e.cloneElement(t,{ref:u})})}const ue=({children:t,initial:s,isPresent:n,onExitComplete:i,custom:l,presenceAffectsLayout:r,mode:a,anchorX:h,root:u})=>{const c=H(de),f=e.useId();let x=!0,g=e.useMemo(()=>(x=!1,{id:f,initial:s,isPresent:n,custom:l,onExitComplete:_=>{c.set(_,!0);for(const p of c.values())if(!p)return;i&&i()},register:_=>(c.set(_,!1),()=>c.delete(_))}),[n,c,i]);return r&&x&&(g={...g}),e.useMemo(()=>{c.forEach((_,p)=>c.set(p,!1))},[n]),e.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),a==="popLayout"&&(t=o.jsx(ae,{isPresent:n,anchorX:h,root:u,children:t})),o.jsx(Q.Provider,{value:g,children:t})};function de(){return new Map}const T=t=>t.key||"";function P(t){const s=[];return e.Children.forEach(t,n=>{e.isValidElement(n)&&s.push(n)}),s}const fe=({children:t,custom:s,initial:n=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:r="sync",propagate:a=!1,anchorX:h="left",root:u})=>{const[c,f]=Z(a),x=e.useMemo(()=>P(t),[t]),g=a&&!c?[]:x.map(T),_=e.useRef(!0),p=e.useRef(x),m=H(()=>new Map),[E,w]=e.useState(x),[d,v]=e.useState(x);ee(()=>{_.current=!1,p.current=x;for(let y=0;y<d.length;y++){const C=T(d[y]);g.includes(C)?m.delete(C):m.get(C)!==!0&&m.set(C,!1)}},[d,g.length,g.join("-")]);const S=[];if(x!==E){let y=[...x];for(let C=0;C<d.length;C++){const j=d[C],D=T(j);g.includes(D)||(y.splice(C,0,j),S.push(j))}return r==="wait"&&S.length&&(y=S),v(P(y)),w(x),null}const{forceRender:R}=e.useContext(te);return o.jsx(o.Fragment,{children:d.map(y=>{const C=T(y),j=a&&!c?!1:x===d||g.includes(C),D=()=>{if(m.has(C))m.set(C,!0);else return;let $=!0;m.forEach(Y=>{Y||($=!1)}),$&&(R?.(),v(p.current),a&&f?.(),i&&i())};return o.jsx(ue,{isPresent:j,initial:!_.current||n?void 0:!1,custom:s,presenceAffectsLayout:l,mode:r,root:u,onExitComplete:j?void 0:D,anchorX:h,children:y},C)})})},me=(t,s,n)=>{if(s===0||t.length===0)return t;const i=s+n*2,l=structuredClone(t),r=[...l];for(;r.length*n<i;)r.push(...l);return r},he=t=>Array.from({length:t},()=>0),pe=(t,s,n,i)=>(l,r)=>l.map((a,h)=>{const u=t[h];if(!u)return a;const c=W(u);let f=a+r;return r<0&&c.right<s.left?f+=n*(c.width+i):r>0&&c.left>s.right&&(f-=n*(c.width+i)),f}),W=t=>{const s=t?.getBoundingClientRect();return{left:s?.left||0,right:s?.right||0,width:s?.width||0}},B=(t,s)=>{t.forEach((n,i)=>{n&&(n.style.transform=`translate3d(${s[i]}px, 0, 0)`)})},ge=.95,xe=.5,_e=2,ve=25,Ee=({setCircularAnimationPaused:t,translateX:s,slides:n,containerRef:i,updatePositions:l})=>{const r=e.useRef(0),a=e.useRef(0),h=e.useRef(!1),u=e.useRef(performance.now()),c=e.useRef(0),f=e.useRef(null),x=e.useRef(!1),g=e.useCallback(()=>{f.current&&cancelAnimationFrame(f.current),f.current=null,x.current=!1,h.current=!1,c.current=0,r.current=0,a.current=0,t(!1)},[t]);e.useEffect(()=>()=>{g()},[g]);const _=e.useCallback(d=>{const v="touches"in d;if(v&&d.touches.length!==1)return;const S=v?d.touches[0].clientX:d.clientX;g(),t(!0),h.current=!0,u.current=performance.now(),a.current=S,c.current=0},[t,g]),p=e.useCallback(()=>{h.current=!1;let d=c.current;r.current=0;function v(){Math.abs(d)>xe?(d*=ge,s.current=l(s.current,d),B(n,s.current),f.current=requestAnimationFrame(v)):g()}Math.abs(d)>_e?(x.current=!0,v()):g()},[l,g,n,s]),m=e.useCallback(d=>{if(!h.current)return;d.cancelable&&d.preventDefault();const v=d instanceof TouchEvent;if(v&&d.touches.length!==1)return;const S=v?d.touches[0].clientX:d.clientX,R=S-a.current;a.current=S,s.current=l(s.current,R),B(n,s.current);const y=performance.now(),C=y-u.current;c.current=R/C*ve,u.current=y},[s,n,l]);e.useEffect(()=>{const d=i?.current;if(!d)return;d.addEventListener("touchmove",m,{passive:!1}),d.addEventListener("mousemove",m,{passive:!1});const v=()=>{h.current&&p()};return document.addEventListener("touchend",v),document.addEventListener("mouseup",v),()=>{d.removeEventListener("touchmove",m),d.removeEventListener("mousemove",m),document.removeEventListener("touchend",v),document.removeEventListener("mouseup",v)}},[i,m,p]);const E=e.useCallback(()=>{t(!0)},[t]),w=e.useCallback(()=>{t(!1)},[t]);return{domActions:{onTouchStart:_,onMouseDown:_,onTouchEnd:p,onMouseUp:p,onMouseEnter:E,onMouseLeave:w},stopAnimation:g}},Ce=({speed:t,side:s,slides:n,translateX:i,updatePositions:l,containerRef:r})=>{const[a,h]=e.useState(!1),u=oe(r);return e.useEffect(()=>{h(!u)},[u]),e.useEffect(()=>{let c=null;const f=()=>{if(a||!t){c&&(cancelAnimationFrame(c),c=null);return}const x=s==="left"?-t:t;i.current=l(i.current,x),B(n,i.current),c=requestAnimationFrame(f)};return!a&&t&&(c=requestAnimationFrame(f)),()=>{c&&cancelAnimationFrame(c)}},[a,s,t,i,n,l]),{setCircularAnimationPaused:h}},V=t=>{const[s,n]=e.useState({left:0,right:0,width:0});return e.useEffect(()=>{const i=t.current;if(!i)return;const l=()=>{n({...W(i)})};l();const r=new ResizeObserver(l);return r.observe(i),()=>{r.disconnect()}},[t]),s},be="_container_w4m58_1",Se="_slidesContainer_w4m58_12",q={container:be,slidesContainer:Se},ye=({speed:t,side:s="left",slides:n,slideWidth:i,renderSlide:l})=>{const r=e.useRef(null),a=e.useRef(null),h=e.useRef([]),u=e.useRef([]),{screenWidth:c}=U(),f=V(r),x=V(a),g=e.useMemo(()=>{const S=f.width||600;return me(n,S,i)},[f.width,n,i]),_=g.length,p=(x.width-_*i)/(_-1),m=e.useMemo(()=>pe(h.current,f,_,p),[f,_,p]),{setCircularAnimationPaused:E}=Ce({speed:t,side:s,slides:h.current,translateX:u,updatePositions:m,containerRef:r}),{domActions:w,stopAnimation:d}=Ee({setCircularAnimationPaused:E,translateX:u,slides:h.current,containerRef:r,updatePositions:m});e.useEffect(()=>{(()=>{d(),u.current=he(_),B(h.current,u.current)})()},[c,_,d,t,s]);const v=e.useCallback(S=>R=>{h.current[S]=R},[]);return o.jsx("div",{ref:r,className:q.container,...w,children:o.jsx("div",{ref:a,className:q.slidesContainer,children:g.map((S,R)=>l(S,R,v(R)))})})},we=t=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...t},e.createElement("defs",null,e.createElement("style",null,`
      .react-stroke { stroke: currentColor; stroke-width: 16; fill: none; }
      .react-fill { fill: currentColor; }
    `)),e.createElement("circle",{cx:128,cy:128,r:20,className:"react-fill"}),e.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}),e.createElement("g",{transform:"rotate(60 128 128)"},e.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40})),e.createElement("g",{transform:"rotate(-60 128 128)"},e.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}))),Re=t=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...t},e.createElement("defs",null,e.createElement("style",null,`
      .ts-fill { fill: currentColor; }
      .ts-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 120px; }
    `)),e.createElement("rect",{className:"ts-fill",x:0,y:0,width:256,height:256,rx:20}),e.createElement("text",{className:"ts-text",x:128,y:180,textAnchor:"middle",dominantBaseline:"central"},"TS")),je=t=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...t},e.createElement("defs",null,e.createElement("style",null,`
      .node-fill { fill: currentColor; }
      .node-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 80px; }
    `)),e.createElement("circle",{className:"node-fill",cx:128,cy:128,r:100}),e.createElement("text",{className:"node-text",x:128,y:160,textAnchor:"middle",dominantBaseline:"central"},"node")),Ne="_root_1wiy3_1",Ie="_content_1wiy3_10",Le="_icon_1wiy3_58",Te="_text_1wiy3_63",F={root:Ne,content:Ie,icon:Le,text:Te},Fe={reactlogo:we,typescript:Re,nodejs:je},K=e.forwardRef(({query:t,image:s,width:n=20,height:i=20,...l},r)=>{const a=Fe[s];return a?o.jsx("div",{ref:r,className:F.root,children:o.jsxs("div",{"aria-label":t,className:O(F.content,"surface-transparent"),children:[o.jsx(a,{...l,width:n,height:i,viewBox:"0 0 256 256",className:F.icon}),o.jsx("div",{className:F.text,children:t})]})}):null});K.displayName="SlideContent";const Me=e.memo(K),Ae="_label_1gob4_1",Be="_input_1gob4_10",De="_inputText_1gob4_16",ke="_inputRange_1gob4_31",M={label:Ae,input:Be,inputText:De,inputRange:ke},Oe=({label:t,id:s,valueDisplay:n,showValue:i=!0,className:l,labelClassName:r,inputClassName:a,type:h="text",...u})=>{const c=s||`input-${t.toLowerCase().replace(/\s+/g,"-")}`,f=n!==void 0?n:u.value?.toString(),x=h==="range"?M.inputRange:M.inputText;return o.jsxs("div",{className:l,children:[o.jsxs("label",{htmlFor:c,className:O(M.label,r),children:[t,i&&f&&`: ${f}`]}),o.jsx("input",{id:c,type:h,...u,className:O(M.input,x,a)})]})},$e="_root_1igbr_1",ze="_button_1igbr_6",Pe="_panel_1igbr_13",Ve="_title_1igbr_45",qe="_section_1igbr_49",Ge="_label_1igbr_57",He="_directionGroup_1igbr_67",Ue="_directionButton_1igbr_74",We="_slidesContainer_1igbr_78",Ke="_slide_1igbr_78",Ye="_slideIndex_1igbr_99",Xe="_input_1igbr_103",Je="_select_1igbr_104",Qe="_applyButton_1igbr_128",b={root:$e,button:ze,panel:Pe,title:Ve,section:qe,label:Ge,directionGroup:He,directionButton:Ue,slidesContainer:We,slide:Ke,slideIndex:Ye,input:Xe,select:Je,applyButton:Qe},k={MIN:.1,MAX:3,STEP:.1},Ze=({onUpdate:t,initialSlides:s,initialSpeed:n,initialSide:i})=>{const[l,r]=e.useState(!1),[a,h]=e.useState(n),[u,c]=e.useState(i),[f,x]=e.useState(s);e.useEffect(()=>{const p=document.getElementById("js-animations");if(!p)return;const m=new IntersectionObserver(([E])=>{E.isIntersecting||r(!1)},{threshold:.01});return m.observe(p),()=>{m.unobserve(p)}},[]);const g=(p,m,E)=>{const w=[...f];w[p]={...w[p],[m]:E},x(w)},_=()=>{t({slides:f,speed:a,side:u}),r(!1)};return o.jsxs(o.Fragment,{children:[o.jsx(ne,{children:o.jsx("div",{className:b.root,children:o.jsx(L,{variant:"magic",onClick:()=>r(!l),className:b.button,children:l?"✕ Close":"⚙️ Configure Slider"})})}),o.jsx(fe,{children:l&&o.jsxs(se.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:b.panel,children:[o.jsx(N,{variant:"h3",size:"lg",weight:"bold",color:"primary",className:b.title,children:"Slider Configuration"}),o.jsxs("div",{className:b.section,children:[o.jsx(Oe,{label:"Speed",type:"range",min:k.MIN,max:k.MAX,step:k.STEP,value:a,valueDisplay:a.toFixed(1),onChange:p=>h(Number(p.target.value))}),o.jsxs("div",{children:[o.jsx(N,{variant:"label",className:b.label,color:"muted",children:"Direction"}),o.jsxs("div",{className:b.directionGroup,children:[o.jsx(L,{variant:"toggle",isActive:u==="left",onClick:()=>c("left"),className:b.directionButton,children:"← Left"}),o.jsx(L,{variant:"toggle",isActive:u==="right",onClick:()=>c("right"),className:b.directionButton,children:"Right →"})]})]}),o.jsxs("div",{children:[o.jsx(N,{variant:"label",className:b.label,color:"muted",children:"Slide Content"}),o.jsx("div",{className:b.slidesContainer,children:f.map((p,m)=>o.jsxs("div",{className:b.slide,children:[o.jsxs(N,{variant:"caption",className:b.slideIndex,children:["Slide ",m+1]}),o.jsx("input",{type:"text",value:p.query,onChange:E=>g(m,"query",E.target.value),placeholder:"Slide text",className:b.input}),o.jsxs("select",{value:p.image,onChange:E=>g(m,"image",E.target.value),className:b.select,children:[o.jsx("option",{value:"reactlogo",children:"React Logo"}),o.jsx("option",{value:"typescript",children:"TypeScript Logo"}),o.jsx("option",{value:"nodejs",children:"Node.js Logo"})]})]},m))})]}),o.jsx(L,{onClick:_,variant:"primary",className:b.applyButton,children:"Apply Changes"})]})]})})]})},et=[{query:"Spin it up",image:"reactlogo"},{query:"Type it safe",image:"typescript"},{query:"Run it fast",image:"nodejs"}],tt="_root_1u5cb_1",nt="_content_1u5cb_11",st="_header_1u5cb_20",rt="_title_1u5cb_26",ot="_subtitle_1u5cb_30",it="_sliderContainer_1u5cb_35",I={root:tt,content:nt,header:st,title:rt,subtitle:ot,sliderContainer:it},G={DESKTOP:244,MOBILE:200},ct=6,lt=["#06B6D4","#3B82F6","#A855F7","#6366F1","#7DD3FC","#8B5CF6"],at=Array.from({length:ct},(t,s)=>s),ut=lt.map(t=>({"--slider-color":t})),A={slides:et,speed:.6,side:"left"},dt=()=>o.jsxs("div",{className:I.header,children:[o.jsx(N,{variant:"h2",size:"3xl",weight:"bold",className:I.title,children:"Reusable components with JS animations"}),o.jsx(N,{variant:"body",className:I.subtitle,color:"muted",children:"Configure your own slider"})]}),ht=()=>{const{screenWidth:t}=U(),s=t>re.MOBILE?G.DESKTOP:G.MOBILE,n=e.useRef(null),[i,l]=e.useState(!1);e.useEffect(()=>{if(!n.current)return;const u=new IntersectionObserver(([c])=>{l(c.isIntersecting&&c.intersectionRatio>.1)},{threshold:[0,.1,.5,1],rootMargin:"0px"});return u.observe(n.current),()=>{u.disconnect()}},[]);const[r,a]=e.useState(A),h=e.useCallback((u,c,f)=>o.jsx(Me,{ref:f,...u},c),[]);return o.jsx("div",{ref:n,className:I.root,children:o.jsxs("div",{className:I.content,children:[o.jsx(dt,{}),o.jsx(Ze,{onUpdate:a,initialSlides:A.slides,initialSpeed:A.speed,initialSide:A.side}),at.map(u=>o.jsx("div",{className:I.sliderContainer,style:ut[u],children:o.jsx(ye,{slides:r.slides,speed:i?r.speed:0,side:r.side,slideWidth:s,renderSlide:h})},u))]})})};export{ht as SecondScreen};
