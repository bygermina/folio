import{r as l,j as h,f as J,h as ue,R as F,k as fe,c as he,T as Y}from"./index-BzuJaXDf.js";const B=typeof window<"u"?l.useLayoutEffect:l.useEffect;function Q(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function me({box:e,defaultHeight:t,defaultWidth:s,disabled:n,element:i,mode:r,style:a}){const{styleHeight:c,styleWidth:o}=l.useMemo(()=>({styleHeight:Q(a?.height),styleWidth:Q(a?.width)}),[a?.height,a?.width]),[d,u]=l.useState({height:t,width:s}),f=n||c!==void 0||r==="only-width"||c!==void 0&&o!==void 0;return B(()=>{if(i===null||f)return;const x=new ResizeObserver(b=>{for(const y of b){const{contentRect:S,target:g}=y;i===g&&u(I=>I.height===S.height&&I.width===S.width?I:{height:S.height,width:S.width})}});return x.observe(i,{box:e}),()=>{x?.unobserve(i)}},[e,f,i,c,o]),l.useMemo(()=>({height:c??d.height,width:o??d.width}),[d,c,o])}function ge(e){const t=l.useRef(()=>{throw new Error("Cannot call during render.")});return B(()=>{t.current=e},[e]),l.useCallback(s=>t.current?.(s),[t])}function G({containerElement:e,direction:t,isRtl:s,scrollOffset:n}){return n}function M(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function V(e,t){if(e===t)return!0;if(!!e!=!!t||(M(e!==void 0),M(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const s in e)if(!Object.is(t[s],e[s]))return!1;return!0}function ie({cachedBounds:e,itemCount:t,itemSize:s}){if(t===0)return 0;if(typeof s=="number")return t*s;{const n=e.get(e.size===0?0:e.size-1);M(n!==void 0,"Unexpected bounds cache miss");const i=(n.scrollOffset+n.size)/e.size;return t*i}}function be({align:e,cachedBounds:t,index:s,itemCount:n,itemSize:i,containerScrollOffset:r,containerSize:a}){if(s<0||s>=n)throw RangeError(`Invalid index specified: ${s}`,{cause:`Index ${s} is not within the range of 0 - ${n-1}`});const c=ie({cachedBounds:t,itemCount:n,itemSize:i}),o=t.get(s),d=Math.max(0,Math.min(c-a,o.scrollOffset)),u=Math.max(0,o.scrollOffset-a+o.size);switch(e==="smart"&&(r>=u&&r<=d?e="auto":e="center"),e){case"start":return d;case"end":return u;case"center":return o.scrollOffset<=a/2?0:o.scrollOffset+o.size/2>=c-a/2?c-a:o.scrollOffset+o.size/2-a/2;case"auto":default:return r>=u&&r<=d?r:r<u?u:d}}function X({cachedBounds:e,containerScrollOffset:t,containerSize:s,itemCount:n,overscanCount:i}){const r=n-1;let a=0,c=-1,o=0,d=-1,u=0;for(;u<r;){const f=e.get(u);if(f.scrollOffset+f.size>t)break;u++}for(a=u,o=Math.max(0,a-i);u<r;){const f=e.get(u);if(f.scrollOffset+f.size>=t+s)break;u++}return c=Math.min(r,u),d=Math.min(n-1,c+i),a<0&&(a=0,c=-1,o=0,d=-1),{startIndexVisible:a,stopIndexVisible:c,startIndexOverscan:o,stopIndexOverscan:d}}function pe({itemCount:e,itemProps:t,itemSize:s}){const n=new Map;return{get(i){for(M(i<e,`Invalid index ${i}`);n.size-1<i;){const a=n.size;let c;switch(typeof s){case"function":{c=s(a,t);break}case"number":{c=s;break}}if(a===0)n.set(a,{size:c,scrollOffset:0});else{const o=n.get(a-1);M(o!==void 0,`Unexpected bounds cache miss for index ${i}`),n.set(a,{scrollOffset:o.scrollOffset+o.size,size:c})}}const r=n.get(i);return M(r!==void 0,`Unexpected bounds cache miss for index ${i}`),r},set(i,r){n.set(i,r)},get size(){return n.size}}}function ve({itemCount:e,itemProps:t,itemSize:s}){return l.useMemo(()=>pe({itemCount:e,itemProps:t,itemSize:s}),[e,t,s])}function xe({containerSize:e,itemSize:t}){let s;switch(typeof t){case"string":{M(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),M(e!==void 0,"Container size must be defined if a percentage item size is specified"),s=e*parseInt(t)/100;break}default:{s=t;break}}return s}function we({containerElement:e,containerStyle:t,defaultContainerSize:s=0,direction:n,isRtl:i=!1,itemCount:r,itemProps:a,itemSize:c,onResize:o,overscanCount:d}){const[u,f]=l.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:x,startIndexOverscan:b,stopIndexVisible:y,stopIndexOverscan:S}={startIndexVisible:Math.min(r-1,u.startIndexVisible),startIndexOverscan:Math.min(r-1,u.startIndexOverscan),stopIndexVisible:Math.min(r-1,u.stopIndexVisible),stopIndexOverscan:Math.min(r-1,u.stopIndexOverscan)},{height:g=s,width:I=s}=me({defaultHeight:s,defaultWidth:void 0,element:e,mode:"only-height",style:t}),O=l.useRef({height:0,width:0}),R=g,T=xe({containerSize:R,itemSize:c});l.useLayoutEffect(()=>{if(typeof o=="function"){const m=O.current;(m.height!==g||m.width!==I)&&(o({height:g,width:I},{...m}),m.height=g,m.width=I)}},[g,o,I]);const w=ve({itemCount:r,itemProps:a,itemSize:T}),D=l.useCallback(m=>w.get(m),[w]),C=l.useCallback(()=>ie({cachedBounds:w,itemCount:r,itemSize:T}),[w,r,T]),W=l.useCallback(m=>{const j=G({containerElement:e,direction:n,isRtl:i,scrollOffset:m});return X({cachedBounds:w,containerScrollOffset:j,containerSize:R,itemCount:r,overscanCount:d})},[w,e,R,n,i,r,d]);B(()=>{const m=e?.scrollTop??0;f(W(m))},[e,n,W]),B(()=>{if(!e)return;const m=()=>{f(j=>{const{scrollLeft:L,scrollTop:v}=e,p=G({containerElement:e,direction:n,isRtl:i,scrollOffset:v}),z=X({cachedBounds:w,containerScrollOffset:p,containerSize:R,itemCount:r,overscanCount:d});return V(z,j)?j:z})};return e.addEventListener("scroll",m),()=>{e.removeEventListener("scroll",m)}},[w,e,R,n,r,d]);const _=ge(({align:m="auto",containerScrollOffset:j,index:L})=>{let v=be({align:m,cachedBounds:w,containerScrollOffset:j,containerSize:R,index:L,itemCount:r,itemSize:T});if(e){if(v=G({containerElement:e,direction:n,isRtl:i,scrollOffset:v}),typeof e.scrollTo!="function"){const p=W(v);V(u,p)||f(p)}return v}});return{getCellBounds:D,getEstimatedSize:C,scrollToIndex:_,startIndexOverscan:b,startIndexVisible:x,stopIndexOverscan:S,stopIndexVisible:y}}function Ie(e){return l.useMemo(()=>e,Object.values(e))}function ye(e,t){const{ariaAttributes:s,style:n,...i}=e,{ariaAttributes:r,style:a,...c}=t;return V(s,r)&&V(n,a)&&V(i,c)}function Se(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const Ce="data-react-window-index";function ze({children:e,className:t,defaultHeight:s=0,listRef:n,onResize:i,onRowsRendered:r,overscanCount:a=3,rowComponent:c,rowCount:o,rowHeight:d,rowProps:u,tagName:f="div",style:x,...b}){const y=Ie(u),S=l.useMemo(()=>l.memo(c,ye),[c]),[g,I]=l.useState(null),O=Se(d),R=l.useMemo(()=>O?v=>d.getRowHeight(v)??d.getAverageRowHeight():d,[O,d]),{getCellBounds:T,getEstimatedSize:w,scrollToIndex:D,startIndexOverscan:C,startIndexVisible:W,stopIndexOverscan:_,stopIndexVisible:m}=we({containerElement:g,containerStyle:x,defaultContainerSize:s,direction:"vertical",itemCount:o,itemProps:y,itemSize:R,onResize:i,overscanCount:a});l.useImperativeHandle(n,()=>({get element(){return g},scrollToRow({align:v="auto",behavior:p="auto",index:z}){const U=D({align:v,containerScrollOffset:g?.scrollTop??0,index:z});typeof g?.scrollTo=="function"&&g.scrollTo({behavior:p,top:U})}}),[g,D]),B(()=>{if(!g)return;const v=Array.from(g.children).filter((p,z)=>{if(p.hasAttribute("aria-hidden"))return!1;const U=`${C+z}`;return p.setAttribute(Ce,U),!0});if(O)return d.observeRowElements(v)},[g,O,d,C,_]),l.useEffect(()=>{C>=0&&_>=0&&r&&r({startIndex:W,stopIndex:m},{startIndex:C,stopIndex:_})},[r,C,W,_,m]);const j=l.useMemo(()=>{const v=[];if(o>0)for(let p=C;p<=_;p++){const z=T(p);v.push(l.createElement(S,{...y,ariaAttributes:{"aria-posinset":p+1,"aria-setsize":o,role:"listitem"},key:p,index:p,style:{position:"absolute",left:0,transform:`translateY(${z.scrollOffset}px)`,height:O?void 0:z.size,width:"100%"}}))}return v},[S,T,O,o,y,C,_]),L=h.jsx("div",{"aria-hidden":!0,style:{height:w(),width:"100%",zIndex:-1}});return l.createElement(f,{role:"list",...b,className:t,ref:I,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...x}},j,e,L)}const Oe="_virtualizedTable_p8hv0_14",Re={virtualizedTable:Oe},_e=({rowCount:e,rowComponent:t,rowHeight:s=48,height:n=600,className:i="",onVisibleRowsChange:r})=>{const a=c=>h.jsx(t,{...c});return h.jsx("div",{className:J(Re.virtualizedTable,i),style:{height:n},children:h.jsx(ze,{rowComponent:a,rowCount:e,rowHeight:s,rowProps:{},onRowsRendered:({startIndex:c,stopIndex:o})=>{r&&r(c,o)},role:"presentation",style:{width:"100%",height:n}})})},je="_card_1kivg_14",Ee={card:je},re=l.forwardRef(({children:e,className:t,as:s="div",...n},i)=>h.jsx(s,{ref:i,className:J(Ee.card,t),...n,children:e}));re.displayName="Card";const oe=(e,t)=>e.position===t.position&&e.top===t.top&&e.left===t.left&&e.width===t.width&&e.height===t.height,ke=()=>(e,t)=>{if(e.index!==t.index)return!1;const s=e.style,n=t.style;return oe(s,n)},Me=(e,t)=>(e.displayName===void 0&&("$$typeof"in e&&e.$$typeof?.toString().includes("Memo")?Object.assign(e,{displayName:t}):e.displayName=t),e),Te="_row_1gxoj_14",We="_dataCard_1gxoj_24",Ae="_dataCardSelected_1gxoj_63",P={row:Te,dataCard:We,dataCardSelected:Ae},Ne=({items:e,style:t,gap:s=8,renderItem:n,rowIndex:i})=>{if(!e?.length)return h.jsx("div",{className:P.row,style:t});const a=(Number(t.height)||48)-s*2;return h.jsx("div",{className:P.row,style:{...t,"--row-gap":`${s}px`,"--card-size":`${a}px`},children:e.map((c,o)=>h.jsx("div",{children:n(c)},o+i))})},ae=l.memo(Ne,(e,t)=>e.rowIndex!==t.rowIndex||e.gap!==t.gap||e.items!==t.items||e.renderItem!==t.renderItem?!1:oe(e.style,t.style));Me(ae,"Row");const $e=l.memo(({value:e,onToggle:t,className:s})=>{const[n,i]=l.useState(!1),r=l.useCallback(()=>{i(!0),t?.()},[t]),a=l.useCallback(c=>{(c.key==="Enter"||c.key===" ")&&r()},[r]);return ue(()=>{i(!1)},n?200:null),h.jsx("div",{className:J(P.dataCard,{[P.dataCardSelected]:n},s),role:"button",tabIndex:0,"aria-pressed":n,"data-role":"data-card",onClick:r,onKeyDown:a,children:e})}),Ve=Object.freeze([]),ee=e=>{let t;const s=new Set,n=(d,u)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const x=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),s.forEach(b=>b(t,x))}},i=()=>t,c={setState:n,getState:i,getInitialState:()=>o,subscribe:d=>(s.add(d),()=>s.delete(d))},o=t=e(n,i,c);return c},He=(e=>e?ee(e):ee),Be=e=>e;function De(e,t=Be){const s=F.useSyncExternalStore(e.subscribe,F.useCallback(()=>t(e.getState()),[e,t]),F.useCallback(()=>t(e.getInitialState()),[e,t]));return F.useDebugValue(s),s}const te=e=>{const t=He(e),s=n=>De(t,n);return Object.assign(s,t),s},Le=(e=>e?te(e):te),Fe=e=>(t,s,n)=>{const i=n.subscribe;return n.subscribe=((a,c,o)=>{let d=a;if(c){const u=o?.equalityFn||Object.is;let f=a(n.getState());d=x=>{const b=a(x);if(!u(f,b)){const y=f;c(f=b,y)}},o?.fireImmediately&&c(f,f)}return i(d)}),e(t,s,n)},qe=Fe;let ce=0;const Pe=e=>Array.from({length:e},()=>({id:ce++,value:Math.random()>.5?1:0}));let N=null,k=null,H=null,A=null,q=0;const K=100,ne=1e4,se=e=>{typeof requestIdleCallback<"u"?requestIdleCallback(e,{timeout:5}):setTimeout(e,0)},Ue=async e=>{if(e===0)return Promise.resolve();if(N&&k&&q===e||A&&q===e)return A;q=e,N=null,k=null,H=null,A=null,ce=0;const t=Math.ceil(ne/K);return A=new Promise(s=>{const n=[];let i=0;const r=()=>{const a=i*K,o=Math.min(a+K,ne)-a,d=Pe(o);n.push(...d),i++,i<t?se(r):(N=Object.fromEntries(n.map(u=>[u.id,u])),k=n.map(u=>u.id),H=Array.from({length:Math.ceil(k.length/e)},(u,f)=>k.slice(f*e,(f+1)*e)),s())};se(r)}),A},$=Le()(qe((e,t)=>{const s=async n=>{n!==0&&(await Ue(n),N&&k&&H&&e({entities:N,entityIds:k,rows:H,itemsPerRow:n}))};return{entities:N||{},entityIds:k||[],rows:H||[],itemsPerRow:q,gap:8,toggleValue:n=>e(i=>{const r=i.entities[n];return r?{entities:{...i.entities,[n]:{...r,value:r.value===0?1:0}}}:i}),setItemsPerRow:n=>{t().itemsPerRow!==n&&s(n)},getRowItemIds:n=>t().rows[n]||[],getEntityValue:n=>t().entities[n]?.value}})),Ye=8,le=l.memo(({itemId:e})=>{const t=$(i=>i.entities[e]?.value),s=$(i=>i.toggleValue),n=l.useCallback(()=>{s(e)},[e,s]);return t===void 0?null:h.jsx($e,{value:t,onToggle:n})},(e,t)=>e.itemId===t.itemId);le.displayName="DataRowItem";const Ge=l.memo(({index:e,style:t})=>{const s=$(r=>r.rows),n=l.useMemo(()=>s[e]??Ve,[s,e]),i=l.useCallback(r=>h.jsx(le,{itemId:r}),[]);return n?.length?h.jsx(ae,{items:n,style:t,gap:Ye,renderItem:i,rowIndex:e}):h.jsx("div",{style:t})},ke()),Ke=({container:e,isEnabled:t,flashCount:s=6,flashDurationMs:n=500,intervalMs:i=200})=>{l.useEffect(()=>{if(!t||!e||s<=0||i<=0||n<=0)return;const a=setInterval(()=>{if(typeof document<"u"&&document.hidden)return;const c=e.querySelectorAll('[data-role="data-card"]'),o=c.length;if(!o)return;const d=Math.min(s,o),u=()=>Math.floor(Math.random()*o);for(let f=0;f<d;f++){const x=u(),b=c[x];b&&b.dataset.flash!=="true"&&(b.dataset.flash="true",setTimeout(()=>{b.dataset.flash==="true"&&(b.dataset.flash="false")},n))}},i);return()=>clearInterval(a)},[e,s,n,i,t])},Ze="_section_1o7sv_14",Je="_heading_1o7sv_25",Qe="_subheading_1o7sv_30",Xe="_loading_1o7sv_37",et="_dataContainer_1o7sv_41",tt="_headingWrapper_1o7sv_48",nt="_subheadingWrapper_1o7sv_55",st="_dataContainerWrapper_1o7sv_60",E={section:Ze,heading:Je,subheading:Qe,loading:Xe,dataContainer:et,headingWrapper:tt,subheadingWrapper:nt,dataContainerWrapper:st},de=56,Z=8,it=({container:e,containerWidth:t})=>{if(!e||t<=0)return 0;const s=window.getComputedStyle(e),n=parseFloat(s.paddingLeft)||0,i=parseFloat(s.paddingRight)||0,r=t-n-i-Z*2;if(r<=0)return 0;const a=de-Z;return Math.max(1,Math.floor((r+Z)/a))},rt=l.memo(()=>{const e=l.useRef(null),t=l.useRef(null),s=fe(t,!0).width,n=he(e,{threshold:0}),i=$(o=>o.rows.length),r=$(o=>o.itemsPerRow),a=$(o=>o.setItemsPerRow);Ke({container:t.current,isEnabled:i>0&&r>0&&n}),l.useEffect(()=>{const o=it({container:t.current,containerWidth:s});!o||o===r||a(o)},[s,r,a]);const c="data-intensive-heading";return h.jsxs("div",{className:E.section,ref:e,"aria-labelledby":c,children:[h.jsx("div",{className:E.headingWrapper,children:h.jsx(Y,{id:c,variant:"h1",className:E.heading,children:"Data intensive"})}),h.jsx("div",{className:E.subheadingWrapper,children:h.jsxs(Y,{variant:"subheading",className:E.subheading,color:"muted",children:[h.jsx(Y,{as:"span",variant:"body",color:"primary",weight:"medium",children:"Issue:"})," ","Rendering ",i*r," data points"]})}),h.jsx(re,{children:h.jsx("div",{ref:t,className:`${E.dataContainer} ${E.dataContainerWrapper}`,children:i>0?h.jsx(_e,{rowCount:i,rowComponent:Ge,rowHeight:de,height:600}):h.jsx("div",{className:E.loading,children:"Loading data..."})})})]})});rt.displayName="ThirdScreen";export{rt as ThirdScreen};
