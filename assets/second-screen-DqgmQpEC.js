import{r as t,M as X,j as r,i as J,u as H,P as Q,a as Z,b as ee,L as te,c as ne,d as se,e as K,f as O,W as oe,B as L,m as re,T as N,g as ie}from"./index-DqMlHvTf.js";function P(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function ce(...e){return o=>{let s=!1;const i=e.map(c=>{const n=P(c,o);return!s&&typeof n=="function"&&(s=!0),n});if(s)return()=>{for(let c=0;c<i.length;c++){const n=i[c];typeof n=="function"?n():P(e[c],null)}}}}function le(...e){return t.useCallback(ce(...e),e)}class ae extends t.Component{getSnapshotBeforeUpdate(o){const s=this.props.childRef.current;if(s&&o.isPresent&&!this.props.isPresent){const i=s.offsetParent,c=J(i)&&i.offsetWidth||0,n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft,n.right=c-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ue({children:e,isPresent:o,anchorX:s,root:i}){const c=t.useId(),n=t.useRef(null),a=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=t.useContext(X),p=le(n,e?.ref);return t.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:v,right:g}=a.current;if(o||!n.current||!l||!u)return;const m=s==="left"?`left: ${v}`:`right: ${g}`;n.current.dataset.motionPopId=c;const x=document.createElement("style");h&&(x.nonce=h);const E=i??document.head;return E.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{E.contains(x)&&E.removeChild(x)}},[o]),r.jsx(ae,{isPresent:o,childRef:n,sizeRef:a,children:t.cloneElement(e,{ref:p})})}const de=({children:e,initial:o,isPresent:s,onExitComplete:i,custom:c,presenceAffectsLayout:n,mode:a,anchorX:h,root:p})=>{const l=H(fe),u=t.useId();let d=!0,v=t.useMemo(()=>(d=!1,{id:u,initial:o,isPresent:s,custom:c,onExitComplete:g=>{l.set(g,!0);for(const m of l.values())if(!m)return;i&&i()},register:g=>(l.set(g,!1),()=>l.delete(g))}),[s,l,i]);return n&&d&&(v={...v}),t.useMemo(()=>{l.forEach((g,m)=>l.set(m,!1))},[s]),t.useEffect(()=>{!s&&!l.size&&i&&i()},[s]),a==="popLayout"&&(e=r.jsx(ue,{isPresent:s,anchorX:h,root:p,children:e})),r.jsx(Q.Provider,{value:v,children:e})};function fe(){return new Map}const T=e=>e.key||"";function V(e){const o=[];return t.Children.forEach(e,s=>{t.isValidElement(s)&&o.push(s)}),o}const me=({children:e,custom:o,initial:s=!0,onExitComplete:i,presenceAffectsLayout:c=!0,mode:n="sync",propagate:a=!1,anchorX:h="left",root:p})=>{const[l,u]=Z(a),d=t.useMemo(()=>V(e),[e]),v=a&&!l?[]:d.map(T),g=t.useRef(!0),m=t.useRef(d),x=H(()=>new Map),[E,f]=t.useState(d),[_,b]=t.useState(d);ee(()=>{g.current=!1,m.current=d;for(let y=0;y<_.length;y++){const j=T(_[y]);v.includes(j)?x.delete(j):x.get(j)!==!0&&x.set(j,!1)}},[_,v.length,v.join("-")]);const S=[];if(d!==E){let y=[...d];for(let j=0;j<_.length;j++){const w=_[j],F=T(w);v.includes(F)||(y.splice(j,0,w),S.push(w))}return n==="wait"&&S.length&&(y=S),b(V(y)),f(d),null}const{forceRender:R}=t.useContext(te);return r.jsx(r.Fragment,{children:_.map(y=>{const j=T(y),w=a&&!l?!1:d===_||v.includes(j),F=()=>{if(x.has(j))x.set(j,!0);else return;let $=!0;x.forEach(Y=>{Y||($=!1)}),$&&(R?.(),b(m.current),a&&u?.(),i&&i())};return r.jsx(de,{isPresent:w,initial:!g.current||s?void 0:!1,custom:o,presenceAffectsLayout:c,mode:n,root:p,onExitComplete:w?void 0:F,anchorX:h,children:y},j)})})},U=e=>{const o=e?.getBoundingClientRect();return{left:o?.left||0,right:o?.right||0,width:o?.width||0}},he=(e,o,s)=>{if(o===0||e.length===0)return e;const i=o+s*2,c=structuredClone(e),n=[...c];for(;n.length*s<i;)n.push(...c);return n},pe=e=>Array.from({length:e},()=>0),xe=(e,o,s,i)=>(c,n)=>c.map((a,h)=>{const p=e[h];if(!p)return a;const l=U(p);let u=a+n;return n<0&&l.right<o.left?u+=s*(l.width+i):n>0&&l.left>o.right&&(u-=s*(l.width+i)),u}),B=(e,o)=>{e.forEach((s,i)=>{if(s){const c=o[i];s.style.transform=`translate3d(${c}px, 0, 0)`}})},ge=.95,_e=.5,ve=2,Ee=25,Ce=({setCircularAnimationPaused:e,translateX:o,slides:s,containerRef:i,updatePositions:c})=>{const n=t.useRef(0),a=t.useRef(!1),h=t.useRef(performance.now()),p=t.useRef(0),l=t.useRef(null),u=t.useRef(!1),d=t.useCallback(()=>{l.current&&cancelAnimationFrame(l.current),l.current=null,u.current=!1,a.current=!1,p.current=0,n.current=0,e(!1)},[e]);t.useEffect(()=>()=>{d()},[d]);const v=t.useCallback(f=>{const _="touches"in f;if(_&&f.touches.length!==1)return;const b=_?f.touches[0].clientX:f.clientX;d(),e(!0),a.current=!0,h.current=performance.now(),n.current=b,p.current=0},[e,d]),g=t.useCallback(()=>{a.current=!1;let f=p.current;const _=()=>{Math.abs(f)>_e?(f*=ge,o.current=c(o.current,f),B(s,o.current),l.current=requestAnimationFrame(_)):d()};Math.abs(f)>ve?(u.current=!0,_()):d()},[c,d,s,o]),m=t.useCallback(f=>{if(!a.current)return;f.cancelable&&f.preventDefault();const _=f instanceof TouchEvent;if(_&&f.touches.length!==1)return;const b=_?f.touches[0].clientX:f.clientX,S=b-n.current;n.current=b,o.current=c(o.current,S),B(s,o.current);const R=performance.now(),y=R-h.current;p.current=S/y*Ee,h.current=R},[o,s,c]);t.useEffect(()=>{const f=i?.current;if(!f)return;f.addEventListener("touchmove",m,{passive:!1}),f.addEventListener("mousemove",m,{passive:!1});const _=()=>{a.current&&g()};return document.addEventListener("touchend",_),document.addEventListener("mouseup",_),()=>{f.removeEventListener("touchmove",m),f.removeEventListener("mousemove",m),document.removeEventListener("touchend",_),document.removeEventListener("mouseup",_)}},[i,m,g]);const x=t.useCallback(()=>{e(!0)},[e]),E=t.useCallback(()=>{e(!1)},[e]);return{domActions:{onTouchStart:v,onMouseDown:v,onTouchEnd:g,onMouseUp:g,onMouseEnter:x,onMouseLeave:E},stopAnimation:d}},je=({speed:e,side:o,slides:s,translateX:i,updatePositions:c,containerRef:n})=>{const[a,h]=t.useState(!1),l=ne(n,{threshold:0})&&!a&&!!e;return se(()=>{const u=o==="left"?-e:e;i.current=c(i.current,u),B(s,i.current)},l),{setCircularAnimationPaused:h}},q=e=>{const[o,s]=t.useState({left:0,right:0,width:0});return t.useEffect(()=>{const i=e.current;if(!i)return;const c=()=>{s({...U(i)})};c();const n=new ResizeObserver(c);return n.observe(i),()=>{n.disconnect()}},[e]),o},Se="_container_1xiqd_14",ye="_slidesContainer_1xiqd_25",G={container:Se,slidesContainer:ye},be=({speed:e,side:o="left",slides:s,slideWidth:i,renderSlide:c})=>{const n=t.useRef(null),a=t.useRef(null),h=t.useRef([]),p=t.useRef([]),{screenWidth:l}=K(),u=q(n),d=q(a),v=t.useMemo(()=>{const S=u.width||600;return he(s,S,i)},[u.width,s,i]),g=v.length,m=(d.width-g*i)/(g-1),x=t.useMemo(()=>xe(h.current,u,g,m),[u,g,m]),{setCircularAnimationPaused:E}=je({speed:e,side:o,slides:h.current,translateX:p,updatePositions:x,containerRef:n}),{domActions:f,stopAnimation:_}=Ce({setCircularAnimationPaused:E,translateX:p,slides:h.current,containerRef:n,updatePositions:x});t.useEffect(()=>{(()=>{_(),p.current=pe(g),B(h.current,p.current)})()},[l,g,_,e,o]);const b=t.useCallback(S=>R=>{h.current[S]=R},[]);return r.jsx("div",{ref:n,className:G.container,...f,children:r.jsx("div",{ref:a,className:G.slidesContainer,children:v.map((S,R)=>c(S,R,b(R)))})})},Re=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .react-stroke { stroke: currentColor; stroke-width: 16; fill: none; }
      .react-fill { fill: currentColor; }
    `)),t.createElement("circle",{cx:128,cy:128,r:20,className:"react-fill"}),t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}),t.createElement("g",{transform:"rotate(60 128 128)"},t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40})),t.createElement("g",{transform:"rotate(-60 128 128)"},t.createElement("ellipse",{className:"react-stroke",cx:128,cy:128,rx:100,ry:40}))),we=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .ts-fill { fill: currentColor; }
      .ts-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 120px; }
    `)),t.createElement("rect",{className:"ts-fill",x:0,y:0,width:256,height:256,rx:20}),t.createElement("text",{className:"ts-text",x:128,y:180,textAnchor:"middle",dominantBaseline:"central"},"TS")),Ne=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:256,height:256,...e},t.createElement("defs",null,t.createElement("style",null,`
      .node-fill { fill: currentColor; }
      .node-text { fill: #FFFFFF; font-family: Arial, sans-serif; font-weight: bold; font-size: 80px; }
    `)),t.createElement("circle",{className:"node-fill",cx:128,cy:128,r:100}),t.createElement("text",{className:"node-text",x:128,y:160,textAnchor:"middle",dominantBaseline:"central"},"node")),Ie="_root_1j2cc_14",Le="_content_1j2cc_23",Te="_icon_1j2cc_71",ke="_text_1j2cc_76",k={root:Ie,content:Le,icon:Te,text:ke},ze={reactlogo:Re,typescript:we,nodejs:Ne},W=t.forwardRef(({query:e,image:o,width:s=20,height:i=20,...c},n)=>{const a=ze[o];return a?r.jsx("div",{ref:n,className:k.root,children:r.jsxs("div",{"aria-label":e,className:O(k.content,"surface-transparent"),children:[r.jsx(a,{...c,width:s,height:i,viewBox:"0 0 256 256",className:k.icon}),r.jsx("div",{className:k.text,children:e})]})}):null});W.displayName="SlideContent";const Me=t.memo(W),Ae="_label_2c990_14",Be="_input_2c990_23",Fe="_inputText_2c990_29",De="_inputRange_2c990_44",z={label:Ae,input:Be,inputText:Fe,inputRange:De},Oe=({label:e,id:o,valueDisplay:s,showValue:i=!0,className:c,labelClassName:n,inputClassName:a,type:h="text",...p})=>{const l=o||`input-${e.toLowerCase().replace(/\s+/g,"-")}`,u=s!==void 0?s:p.value?.toString(),d=h==="range"?z.inputRange:z.inputText;return r.jsxs("div",{className:c,children:[r.jsxs("label",{htmlFor:l,className:O(z.label,n),children:[e,i&&u&&`: ${u}`]}),r.jsx("input",{id:l,type:h,...p,className:O(z.input,d,a)})]})},$e="_root_zlkjm_14",Pe="_button_zlkjm_19",Ve="_panel_zlkjm_26",qe="_title_zlkjm_58",Ge="_section_zlkjm_62",He="_label_zlkjm_70",Ke="_directionGroup_zlkjm_80",Ue="_directionButton_zlkjm_87",We="_slidesContainer_zlkjm_91",Ye="_slide_zlkjm_91",Xe="_slideIndex_zlkjm_112",Je="_input_zlkjm_116",Qe="_select_zlkjm_117",Ze="_applyButton_zlkjm_141",C={root:$e,button:Pe,panel:Ve,title:qe,section:Ge,label:He,directionGroup:Ke,directionButton:Ue,slidesContainer:We,slide:Ye,slideIndex:Xe,input:Je,select:Qe,applyButton:Ze},D={MIN:.1,MAX:3,STEP:.1},et=({onUpdate:e,initialSlides:o,initialSpeed:s,initialSide:i})=>{const[c,n]=t.useState(!1),[a,h]=t.useState(s),[p,l]=t.useState(i),[u,d]=t.useState(o);t.useEffect(()=>{const m=document.getElementById("js-animations");if(!m)return;const x=new IntersectionObserver(([E])=>{E.isIntersecting||n(!1)},{threshold:.01});return x.observe(m),()=>{x.unobserve(m)}},[]);const v=(m,x,E)=>{const f=[...u];f[m]={...f[m],[x]:E},d(f)},g=()=>{e({slides:u,speed:a,side:p}),n(!1)};return r.jsxs(r.Fragment,{children:[r.jsx(oe,{children:r.jsx("div",{className:C.root,children:r.jsx(L,{variant:"magic",onClick:()=>n(!c),className:C.button,"aria-expanded":c,"aria-controls":"slider-configuration-panel",children:c?"✕ Close":"⚙️ Configure Slider"})})}),r.jsx(me,{children:c&&r.jsxs(re.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:C.panel,role:"dialog","aria-modal":"false","aria-labelledby":"slider-configuration-title",id:"slider-configuration-panel",children:[r.jsx(N,{variant:"h3",size:"lg",weight:"bold",color:"primary",className:C.title,id:"slider-configuration-title",children:"Slider Configuration"}),r.jsxs("div",{className:C.section,children:[r.jsx(Oe,{label:"Speed",type:"range",min:D.MIN,max:D.MAX,step:D.STEP,value:a,valueDisplay:a.toFixed(1),onChange:m=>h(Number(m.target.value))}),r.jsxs("div",{children:[r.jsx(N,{variant:"label",className:C.label,color:"muted",children:"Direction"}),r.jsxs("div",{className:C.directionGroup,children:[r.jsx(L,{variant:"toggle",isActive:p==="left",onClick:()=>l("left"),className:C.directionButton,children:"← Left"}),r.jsx(L,{variant:"toggle",isActive:p==="right",onClick:()=>l("right"),className:C.directionButton,children:"Right →"})]})]}),r.jsxs("div",{children:[r.jsx(N,{variant:"label",className:C.label,color:"muted",children:"Slide Content"}),r.jsx("div",{className:C.slidesContainer,children:u.map((m,x)=>r.jsxs("div",{className:C.slide,children:[r.jsxs(N,{variant:"caption",className:C.slideIndex,children:["Slide ",x+1]}),r.jsx("input",{type:"text",value:m.query,onChange:E=>v(x,"query",E.target.value),placeholder:"Slide text",className:C.input}),r.jsxs("select",{value:m.image,onChange:E=>v(x,"image",E.target.value),className:C.select,children:[r.jsx("option",{value:"reactlogo",children:"React Logo"}),r.jsx("option",{value:"typescript",children:"TypeScript Logo"}),r.jsx("option",{value:"nodejs",children:"Node.js Logo"})]})]},x))})]}),r.jsx(L,{onClick:g,variant:"primary",className:C.applyButton,children:"Apply Changes"})]})]})})]})},tt=[{query:"Spin it up",image:"reactlogo"},{query:"Type it safe",image:"typescript"},{query:"Run it fast",image:"nodejs"}],M={MOBILE:200,DESKTOP:200},nt="_root_adj2r_14",st="_content_adj2r_24",ot="_header_adj2r_34",rt="_title_adj2r_40",it="_subtitle_adj2r_44",ct="_sliderContainer_adj2r_49",I={root:nt,content:st,header:ot,title:rt,subtitle:it,sliderContainer:ct},lt=6,at=["#06B6D4","#3B82F6","#A855F7","#6366F1","#7DD3FC","#8B5CF6"],ut=Array.from({length:lt},(e,o)=>o),dt=at.map(e=>({"--slider-color":e})),A={slides:tt,speed:.6,side:"left"},ft=({id:e})=>r.jsxs("div",{className:I.header,children:[r.jsx(N,{id:e,variant:"h2",size:"3xl",weight:"bold",className:I.title,children:"Reusable components with JS animations"}),r.jsx(N,{variant:"body",className:I.subtitle,color:"muted",children:"Configure your own slider"})]}),ht=()=>{const{screenWidth:e}=K(),o=e>ie.MOBILE?M.DESKTOP:M.MOBILE,s=t.useRef(null),[i,c]=t.useState(!1);t.useEffect(()=>{if(!s.current)return;const l=new IntersectionObserver(([u])=>{c(u.isIntersecting&&u.intersectionRatio>.1)},{threshold:[0,.1,.5,1],rootMargin:"0px"});return l.observe(s.current),()=>{l.disconnect()}},[]);const[n,a]=t.useState(A),h="js-animations-heading",p=t.useCallback((l,u,d)=>r.jsx(Me,{ref:d,...l},u),[]);return r.jsx("section",{ref:s,className:I.root,"aria-labelledby":h,children:r.jsxs("div",{className:I.content,children:[r.jsx(ft,{id:h}),r.jsx(et,{onUpdate:a,initialSlides:A.slides,initialSpeed:A.speed,initialSide:A.side}),ut.map(l=>r.jsx("div",{className:I.sliderContainer,style:{...dt[l],"--slide-width-mobile":`${M.MOBILE}px`,"--slide-width-desktop":`${M.DESKTOP}px`},children:r.jsx(be,{slides:n.slides,speed:i?n.speed:0,side:n.side,slideWidth:o,renderSlide:p})},l))]})})};export{ht as SecondScreen};
